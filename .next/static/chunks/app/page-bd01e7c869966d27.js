(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4753:function(e,t,r){Promise.resolve().then(r.bind(r,249))},249:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(7437),n=r(2265),a=r(6013),i=r(495),l=r(5048),o=r(2023),c=r(6780),d=r(8184),m=r(7440);function u(e){let{onFileProcessed:t,isProcessing:r}=e,[a,u]=(0,n.useState)("idle"),[x,h]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),p=(0,n.useCallback)(async e=>{let r=e[0];if(r){u("uploading"),h(""),g(r.name);try{var s,n;if(!(0,m.gA)(r))throw Error("Unsupported file type. Please upload a PDF or Word document.");if(!(0,m.NO)(r))throw Error("File size too large. Please upload a file smaller than 10MB.");let e=new FormData;e.append("file",r);let a=await fetch("/api/upload",{method:"POST",body:e}),i=await a.json();if(i.success&&(null===(s=i.data)||void 0===s?void 0:s.text))u("success"),t(i.data.text);else throw Error((null===(n=i.data)||void 0===n?void 0:n.error)||"Failed to process file")}catch(e){u("error"),h(e instanceof Error?e.message:"Failed to upload file")}}},[t]),{getRootProps:v,getInputProps:b,isDragActive:y}=(0,l.uI)({onDrop:p,accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/msword":[".doc"]},maxFiles:1,disabled:r||"uploading"===a});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{...v(),className:"\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n          ".concat(y?"border-primary bg-primary/5":"border-muted-foreground/25","\n          ").concat(r||"uploading"===a?"opacity-50 cursor-not-allowed":"hover:border-primary/50","\n        "),children:[(0,s.jsx)("input",{...b()}),"uploading"===a?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Processing ",f,"..."]})]}):"success"===a?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.Z,{className:"h-8 w-8 text-green-600 mx-auto"}),(0,s.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"File processed successfully!"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:f})]}):"error"===a?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Z,{className:"h-8 w-8 text-destructive mx-auto"}),(0,s.jsx)("p",{className:"text-sm text-destructive font-medium",children:"Upload failed"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:x})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Z,{className:"h-8 w-8 text-muted-foreground mx-auto"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:y?"Drop the file here":"Drag & drop a file here, or click to select"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Supports PDF, DOCX, and DOC files up to 10MB"})]})]}),"error"===a&&(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{u("idle"),h(""),g("")},className:"w-full",children:"Try Again"})]})}var x=r(3274),h=r(994);function f(e){let{onSubmit:t,isProcessing:r}=e,[a,l]=(0,n.useState)("");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&!r&&t(a.trim())},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"legal-text",className:"text-sm font-medium",children:"Legal Document Text"}),(0,s.jsx)("textarea",{id:"legal-text",value:a,onChange:e=>l(e.target.value),placeholder:"Paste your legal document text here...",className:"w-full h-48 p-3 border border-input rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",disabled:r}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.length," characters"]})]}),(0,s.jsx)(i.z,{type:"submit",disabled:!a.trim()||r,className:"w-full",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Analyze Document"]})})]})}let g=(0,r(3027).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",severity:{must:"border-transparent bg-severity-must text-white hover:bg-severity-must/80",recommend:"border-transparent bg-severity-recommend text-white hover:bg-severity-recommend/80",negotiable:"border-transparent bg-severity-negotiable text-white hover:bg-severity-negotiable/80"}}},defaultVariants:{variant:"default"}});function p(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,m.cn)(g({variant:r}),t),...n})}var v=r(7390),b=r(7164),y=r(404);function j(e){let{result:t}=e,[r,l]=(0,n.useState)("all"),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),x=(0,n.useRef)(null),h=(0,n.useRef)({}),f="all"===r?t.comments:t.comments.filter(e=>e.severity===r),g={"Must Change":t.comments.filter(e=>"Must Change"===e.severity).length,"Recommend to Change":t.comments.filter(e=>"Recommend to Change"===e.severity).length,Negotiable:t.comments.filter(e=>"Negotiable"===e.severity).length},j=e=>{if(c(e.comment_id),u({start:e.start_char_index,end:e.end_char_index}),x.current){let t=x.current,r=24*(t.textContent||"").substring(0,e.start_char_index).split("\n").length;t.scrollTo({top:Math.max(0,r-100),behavior:"smooth"})}},N=e=>{c(e.comment_id);let t=h.current[e.comment_id];t&&t.scrollIntoView({behavior:"smooth",block:"center"})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Z,{className:"h-5 w-5"}),"Analysis Summary"]})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:t.analysis_summary})})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Original Document"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("div",{ref:x,className:"max-h-96 overflow-y-auto p-4 border rounded-md bg-muted/20 text-sm leading-relaxed whitespace-pre-wrap",children:(()=>{if(!t.comments.length)return t.analysis_summary;let e=t.analysis_summary,r=[];[...t.comments].sort((e,t)=>e.start_char_index-t.start_char_index).forEach(e=>{r.push({start:e.start_char_index,end:e.end_char_index,comment:e})});let n=[],a=0;return r.forEach(t=>{let{start:r,end:i,comment:l}=t;r>a&&n.push(e.substring(a,r));let o=e.substring(r,i);n.push((0,s.jsx)("span",{className:"cursor-pointer ".concat((0,m.YF)(l.severity)),onClick:()=>N(l),title:"Click to view comment: ".concat(l.comment_title),children:o},l.comment_id)),a=i}),a<e.length&&n.push(e.substring(a)),n})()})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a.ll,{children:"AI Recommendations"}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([JSON.stringify({documentId:t.document_id,summary:t.analysis_summary,comments:t.comments,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),r=URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download="legal-analysis-".concat(t.document_id,".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsxs)(i.z,{variant:"all"===r?"default":"outline",size:"sm",onClick:()=>l("all"),children:["All (",t.comments.length,")"]}),(0,s.jsxs)(i.z,{variant:"Must Change"===r?"default":"outline",size:"sm",onClick:()=>l("Must Change"),className:"bg-severity-must text-white hover:bg-severity-must/80",children:["Must (",g["Must Change"],")"]}),(0,s.jsxs)(i.z,{variant:"Recommend to Change"===r?"default":"outline",size:"sm",onClick:()=>l("Recommend to Change"),className:"bg-severity-recommend text-white hover:bg-severity-recommend/80",children:["Recommend (",g["Recommend to Change"],")"]}),(0,s.jsxs)(i.z,{variant:"Negotiable"===r?"default":"outline",size:"sm",onClick:()=>l("Negotiable"),className:"bg-severity-negotiable text-white hover:bg-severity-negotiable/80",children:["Negotiable (",g.Negotiable,")"]})]})]})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-4",children:0===f.length?(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No comments match the selected filter."}):f.map(e=>(0,s.jsxs)("div",{ref:t=>{h.current[e.comment_id]=t},className:"\n                      p-4 border rounded-lg cursor-pointer transition-all\n                      ".concat(o===e.comment_id?"ring-2 ring-primary":"hover:border-primary/50","\n                    "),onClick:()=>j(e),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:e.comment_title}),(0,s.jsx)(p,{variant:"severity",className:"Must Change"===e.severity?"bg-severity-must":"Recommend to Change"===e.severity?"bg-severity-recommend":"bg-severity-negotiable",children:e.severity})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-1",children:"Issue:"}),(0,s.jsx)("p",{className:"text-foreground",children:e.comment_details})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-1",children:"Recommendation:"}),(0,s.jsx)("p",{className:"text-foreground font-medium",children:e.recommendation})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:['"',e.original_text,'"']})]})]},e.comment_id))})})]})]})]})}function N(){let[e,t]=(0,n.useState)(!1),[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),d=async e=>{if(!e.trim()){c("Please provide document text to analyze");return}t(!0),c(null);try{let t=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.trim()})}),r=await t.json();r.success&&r.data?l(r.data):c(r.error||"Failed to analyze document")}catch(e){c("Network error. Please try again.")}finally{t(!1)}},m=async e=>{await d(e)},x=async e=>{await d(e)};return(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-4",children:"AI Legal Document Review Assistant"}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Upload your legal documents or paste text to get AI-powered analysis and recommendations from a Silicon Valley law firm perspective."})]}),r?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Analysis Results"}),(0,s.jsx)(i.z,{variant:"outline",onClick:()=>l(null),children:"Analyze New Document"})]}),(0,s.jsx)(j,{result:r})]}):(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{children:[(0,s.jsx)(a.ll,{children:"Upload Document"}),(0,s.jsx)(a.SZ,{children:"Upload a PDF or Word document for analysis"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(u,{onFileProcessed:m,isProcessing:e})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{children:[(0,s.jsx)(a.ll,{children:"Paste Text"}),(0,s.jsx)(a.SZ,{children:"Paste legal document text directly for quick analysis"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(f,{onSubmit:x,isProcessing:e})})]})]}),o&&(0,s.jsx)(a.Zb,{className:"mt-6 border-destructive",children:(0,s.jsx)(a.aY,{className:"pt-6",children:(0,s.jsx)("div",{className:"text-destructive text-center",children:o})})}),e&&(0,s.jsx)(a.Zb,{className:"mt-6",children:(0,s.jsx)(a.aY,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Analyzing your document... This may take 30-60 seconds."})]})})})]})})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7437),n=r(2265),a=r(1538),i=r(3027),l=r(7440);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,m=c?a.g7:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=r(7437),n=r(2265),a=r(7440);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},7440:function(e,t,r){"use strict";r.d(t,{NO:function(){return o},YF:function(){return i},cn:function(){return a},gA:function(){return l}});var s=r(4839),n=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function i(e){switch(e){case"Must Change":return"highlight-must";case"Recommend to Change":return"highlight-recommend";case"Negotiable":return"highlight-negotiable";default:return""}}function l(e){return["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(e.type)}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e.size<=1048576*t}}},function(e){e.O(0,[485,275,971,23,744],function(){return e(e.s=4753)}),_N_E=e.O()}]);