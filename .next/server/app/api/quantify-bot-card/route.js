/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/quantify-bot-card/route";
exports.ids = ["app/api/quantify-bot-card/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquantify-bot-card%2Froute&page=%2Fapi%2Fquantify-bot-card%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquantify-bot-card%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquantify-bot-card%2Froute&page=%2Fapi%2Fquantify-bot-card%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquantify-bot-card%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_lifanwang_Legal_app_api_quantify_bot_card_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/quantify-bot-card/route.ts */ \"(rsc)/./app/api/quantify-bot-card/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/quantify-bot-card/route\",\n        pathname: \"/api/quantify-bot-card\",\n        filename: \"route\",\n        bundlePath: \"app/api/quantify-bot-card/route\"\n    },\n    resolvedPagePath: \"/Users/lifanwang/Legal/app/api/quantify-bot-card/route.ts\",\n    nextConfigOutput,\n    userland: _Users_lifanwang_Legal_app_api_quantify_bot_card_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/quantify-bot-card/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZxdWFudGlmeS1ib3QtY2FyZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcXVhbnRpZnktYm90LWNhcmQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZxdWFudGlmeS1ib3QtY2FyZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxpZmFud2FuZyUyRkxlZ2FsJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmxpZmFud2FuZyUyRkxlZ2FsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNTO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbGVnYWwtcmV2aWV3LWFzc2lzdGFudC8/MjI2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbGlmYW53YW5nL0xlZ2FsL2FwcC9hcGkvcXVhbnRpZnktYm90LWNhcmQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3F1YW50aWZ5LWJvdC1jYXJkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcXVhbnRpZnktYm90LWNhcmRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3F1YW50aWZ5LWJvdC1jYXJkL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2xpZmFud2FuZy9MZWdhbC9hcHAvYXBpL3F1YW50aWZ5LWJvdC1jYXJkL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9xdWFudGlmeS1ib3QtY2FyZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquantify-bot-card%2Froute&page=%2Fapi%2Fquantify-bot-card%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquantify-bot-card%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/quantify-bot-card/route.ts":
/*!********************************************!*\
  !*** ./app/api/quantify-bot-card/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ai_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai-service */ \"(rsc)/./lib/ai-service.ts\");\n\n\nasync function POST(request) {\n    try {\n        const { originalContent, analysisResult } = await request.json();\n        if (!originalContent || !analysisResult) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing originalContent or analysisResult\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Quantifying bot card, content length:\", originalContent.length);\n        const result = await (0,_lib_ai_service__WEBPACK_IMPORTED_MODULE_1__.quantifyBotCard)(originalContent, analysisResult);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result\n        });\n    } catch (error) {\n        console.error(\"Error quantifying bot card:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Failed to quantify bot card\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3F1YW50aWZ5LWJvdC1jYXJkL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNMO0FBRzNDLGVBQWVFLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNLEVBQUVDLGVBQWUsRUFBRUMsY0FBYyxFQUFFLEdBQUcsTUFBTUYsUUFBUUcsSUFBSTtRQUU5RCxJQUFJLENBQUNGLG1CQUFtQixDQUFDQyxnQkFBZ0I7WUFDdkMsT0FBT0wscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBNEMsR0FDckU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBQyxRQUFRQyxHQUFHLENBQUMseUNBQXlDUCxnQkFBZ0JRLE1BQU07UUFFM0UsTUFBTUMsU0FBUyxNQUFNWixnRUFBZUEsQ0FBQ0csaUJBQWlCQztRQUV0RCxPQUFPTCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RPLE1BQU1EO1FBQ1I7SUFDRixFQUFFLE9BQU9MLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLCtCQUErQkE7UUFFN0MsT0FBT1IscURBQVlBLENBQUNNLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUQyxPQUFPQSxpQkFBaUJPLFFBQVFQLE1BQU1RLE9BQU8sR0FBRztRQUNsRCxHQUNBO1lBQUVQLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbGVnYWwtcmV2aWV3LWFzc2lzdGFudC8uL2FwcC9hcGkvcXVhbnRpZnktYm90LWNhcmQvcm91dGUudHM/ODJkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBxdWFudGlmeUJvdENhcmQgfSBmcm9tICdAL2xpYi9haS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBCb3RDYXJkQW5hbHlzaXNSZXN1bHQgfSBmcm9tICdAL3R5cGVzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb3JpZ2luYWxDb250ZW50LCBhbmFseXNpc1Jlc3VsdCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICBpZiAoIW9yaWdpbmFsQ29udGVudCB8fCAhYW5hbHlzaXNSZXN1bHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdNaXNzaW5nIG9yaWdpbmFsQ29udGVudCBvciBhbmFseXNpc1Jlc3VsdCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1F1YW50aWZ5aW5nIGJvdCBjYXJkLCBjb250ZW50IGxlbmd0aDonLCBvcmlnaW5hbENvbnRlbnQubGVuZ3RoKVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1YW50aWZ5Qm90Q2FyZChvcmlnaW5hbENvbnRlbnQsIGFuYWx5c2lzUmVzdWx0IGFzIEJvdENhcmRBbmFseXNpc1Jlc3VsdClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcXVhbnRpZnlpbmcgYm90IGNhcmQ6JywgZXJyb3IpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHF1YW50aWZ5IGJvdCBjYXJkJ1xuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicXVhbnRpZnlCb3RDYXJkIiwiUE9TVCIsInJlcXVlc3QiLCJvcmlnaW5hbENvbnRlbnQiLCJhbmFseXNpc1Jlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwicmVzdWx0IiwiZGF0YSIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/quantify-bot-card/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai-service.ts":
/*!***************************!*\
  !*** ./lib/ai-service.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeBotCard: () => (/* binding */ analyzeBotCard),\n/* harmony export */   analyzeLegalDocument: () => (/* binding */ analyzeLegalDocument),\n/* harmony export */   quantifyBotCard: () => (/* binding */ quantifyBotCard)\n/* harmony export */ });\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/genai */ \"(rsc)/./node_modules/@google/genai/dist/node/index.mjs\");\n\nconst ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n    apiKey: \"AIzaSyDIEvtGeRzQ_4Iop0GmZGbmC8yIzEEp5I8\" || 0\n});\n// 简单的内存缓存\nconst analysisCache = new Map();\nconst botCardCache = new Map();\n// 生成缓存键\nfunction generateCacheKey(text, systemPrompt) {\n    const content = `${text}-${systemPrompt || \"default\"}`;\n    // 简单哈希函数\n    let hash = 0;\n    for(let i = 0; i < content.length; i++){\n        const char = content.charCodeAt(i);\n        hash = (hash << 5) - hash + char;\n        hash = hash & hash // 转换为32位整数\n        ;\n    }\n    return hash.toString();\n}\nfunction parseRobustJson(textResponse) {\n    console.log(\"Attempting to parse JSON, length:\", textResponse.length);\n    console.log(\"JSON preview:\", textResponse.substring(0, 500));\n    try {\n        // 基本清理\n        let jsonText = textResponse.trim();\n        // 移除markdown代码块\n        jsonText = jsonText.replace(/^```(?:json)?\\s*/g, \"\");\n        jsonText = jsonText.replace(/```\\s*$/g, \"\");\n        // 修复智能引号\n        jsonText = jsonText.replace(/[\"\"]/g, '\"');\n        jsonText = jsonText.replace(/['']/g, \"'\");\n        // 移除尾随逗号\n        jsonText = jsonText.replace(/,(\\s*[}\\]])/g, \"$1\");\n        const result = JSON.parse(jsonText);\n        console.log(\"Successfully parsed JSON\");\n        return result;\n    } catch (error) {\n        console.log(\"JSON parse error:\", error);\n        // 返回fallback结果\n        return {\n            document_id: `fallback-${Date.now()}`,\n            analysis_summary: \"Document analysis encountered technical issues. Please try again or consult legal counsel.\",\n            comments: [\n                {\n                    comment_id: \"fallback-comment\",\n                    context_before: \"\",\n                    original_text: \"Document requires review\",\n                    context_after: \"\",\n                    severity: \"Recommend to Change\",\n                    comment_title: \"Technical Analysis Issue\",\n                    comment_details: \"The automated analysis could not be completed due to technical issues. Please have this document reviewed manually.\",\n                    recommendation: \"Consult with qualified legal counsel for a thorough review.\",\n                    market_standard: {\n                        is_standard: \"Partially\",\n                        reasoning: \"Unable to complete market analysis.\"\n                    }\n                }\n            ]\n        };\n    }\n}\nfunction parseBotCardJson(textResponse) {\n    console.log(\"Attempting to parse bot card JSON, length:\", textResponse.length);\n    console.log(\"JSON preview:\", textResponse.substring(0, 500));\n    try {\n        // 基本清理\n        let jsonText = textResponse.trim();\n        // 移除markdown代码块\n        jsonText = jsonText.replace(/^```(?:json)?\\s*/g, \"\");\n        jsonText = jsonText.replace(/```\\s*$/g, \"\");\n        // 修复智能引号\n        jsonText = jsonText.replace(/[\"\"]/g, '\"');\n        jsonText = jsonText.replace(/['']/g, \"'\");\n        // 移除尾随逗号\n        jsonText = jsonText.replace(/,(\\s*[}\\]])/g, \"$1\");\n        const result = JSON.parse(jsonText);\n        console.log(\"Successfully parsed bot card JSON\");\n        return result;\n    } catch (error) {\n        console.log(\"Bot card JSON parse error:\", error);\n        // 返回fallback结果\n        return {\n            card_id: `fallback-${Date.now()}`,\n            analysis_summary: {\n                overall_assessment: \"Bot card analysis encountered technical issues. Please try again.\",\n                target_audience_fit: \"Unable to determine target audience due to technical issues.\",\n                discoverability_and_packaging: \"Unable to assess packaging due to technical issues.\",\n                narrative_potential_and_originality: \"Unable to evaluate narrative potential due to technical issues.\",\n                key_strengths_summary: \"Unable to identify strengths due to technical issues.\",\n                key_weaknesses_summary: \"Unable to identify weaknesses due to technical issues.\"\n            },\n            locatable_comments: [\n                {\n                    comment_id: \"fallback-comment\",\n                    source_section: \"General\",\n                    context_before: \"\",\n                    original_text: \"Bot card requires review\",\n                    context_after: \"\",\n                    comment_type: \"Content Issue\",\n                    comment_title: \"Technical Analysis Issue\",\n                    comment_details: \"The automated analysis could not be completed due to technical issues. Please have this bot card reviewed manually.\",\n                    recommendation: \"Review the bot card content manually and ensure all sections are properly formatted.\"\n                }\n            ]\n        };\n    }\n}\nconst DEFAULT_SYSTEM_PROMPT = `You are a senior legal advisor helping a startup founder review legal documents. \n\nAnalyze the document and return ONLY a valid JSON object with this exact structure:\n\n{\n  \"document_id\": \"unique-id\",\n  \"analysis_summary\": \"Brief summary of key issues\",\n  \"comments\": [\n    {\n      \"comment_id\": \"comment-1\", \n      \"context_before\": \"text before\",\n      \"original_text\": \"exact text from document\",\n      \"context_after\": \"text after\",\n      \"severity\": \"Must Change\",\n      \"comment_title\": \"Short title\",\n      \"comment_details\": \"Explanation of the issue\",\n      \"recommendation\": \"What to do about it\",\n      \"market_standard\": {\n        \"is_standard\": \"Yes/No/Partially\",\n        \"reasoning\": \"Brief explanation\"\n      }\n    }\n  ]\n}\n\nCRITICAL: Return ONLY the JSON object. No markdown formatting, no explanations, no additional text.`;\nconst BOT_CARD_REVIEW_PROMPT = `You are a top-tier AI character content strategy analyst. Analyze the provided bot card content and create a comprehensive analysis report in JSON format.\n\nYour analysis should include:\n\n1. ANALYSIS SUMMARY - A detailed strategic assessment covering:\n   - overall_assessment: Overall quality, core experience, and creation level\n   - target_audience_fit: Target user analysis (RPG players, casual users, etc.) and how well it meets their needs\n   - discoverability_and_packaging: Title, description quality, searchability, and appeal\n   - narrative_potential_and_originality: Long-term playability, creativity, uniqueness vs generic templates\n   - key_strengths_summary: Main strengths and highlights\n   - key_weaknesses_summary: Main areas needing improvement\n\n2. LOCATABLE COMMENTS - Specific, evidence-based feedback on text segments:\n   - comment_type options: \"内容优点\" (content strengths), \"内容问题\" (content issues), \"LLM问题\" (LLM/prompt issues)\n   - Provide detailed analysis and specific recommendations\n\nReturn ONLY this JSON structure:\n{\n  \"card_id\": \"unique_id_for_card\",\n  \"analysis_summary\": {\n    \"overall_assessment\": \"detailed overall assessment\",\n    \"target_audience_fit\": \"detailed target audience analysis\", \n    \"discoverability_and_packaging\": \"detailed packaging analysis\",\n    \"narrative_potential_and_originality\": \"detailed creativity analysis\",\n    \"key_strengths_summary\": \"detailed strengths summary\",\n    \"key_weaknesses_summary\": \"detailed weaknesses summary\"\n  },\n  \"locatable_comments\": [\n    {\n      \"comment_id\": \"comment-1\",\n      \"source_section\": \"Title|Description|Welcome Message|Bot Prompt\",\n      \"context_before\": \"text before highlighted section\",\n      \"original_text\": \"exact text being commented on\",\n      \"context_after\": \"text after highlighted section\", \n      \"comment_type\": \"内容优点|内容问题|LLM问题\",\n      \"comment_title\": \"concise comment title\",\n      \"comment_details\": \"detailed analysis explanation\",\n      \"recommendation\": \"specific actionable improvement\"\n    }\n  ]\n}\n\nCRITICAL: Return ONLY the JSON object. No markdown formatting, no explanations, no additional text.`;\nfunction parseBotCardQuantitativeJson(textResponse) {\n    console.log(\"Attempting to parse bot card quantitative JSON, length:\", textResponse.length);\n    console.log(\"JSON preview:\", textResponse.substring(0, 500));\n    try {\n        // 基本清理\n        let jsonText = textResponse.trim();\n        // 移除markdown代码块\n        jsonText = jsonText.replace(/^```(?:json)?\\s*/g, \"\");\n        jsonText = jsonText.replace(/```\\s*$/g, \"\");\n        // 修复智能引号\n        jsonText = jsonText.replace(/[\"\"]/g, '\"');\n        jsonText = jsonText.replace(/['']/g, \"'\");\n        // 移除尾随逗号\n        jsonText = jsonText.replace(/,(\\s*[}\\]])/g, \"$1\");\n        const result = JSON.parse(jsonText);\n        // 验证并重新计算final score以确保正确性\n        const scores = result.quantitative_scores.sections;\n        const adjustments = result.quantitative_scores.adjustments;\n        // 确保title和description分数不超过5分\n        if (scores.title_and_description.title.score > 5) {\n            scores.title_and_description.title.score = 5;\n        }\n        if (scores.title_and_description.description.score > 5) {\n            scores.title_and_description.description.score = 5;\n        }\n        // 重新计算final score\n        const calculatedFinalScore = scores.title_and_description.title.score + scores.title_and_description.description.score + (scores.welcome_message.character_world_building.score + scores.welcome_message.hook_and_attraction.score + scores.welcome_message.guidance.score) + (scores.bot_prompt.character_story_arc.score + scores.bot_prompt.setting_consistency.score + scores.bot_prompt.long_term_potential.score) + (scores.interaction_test_prediction.character_stability.score + scores.interaction_test_prediction.plot_driving_force.score + scores.interaction_test_prediction.emotional_resonance.score) + adjustments.originality_bonus.score - adjustments.technical_deduction.score;\n        // 确保final score在合理范围内 (0-100)\n        result.quantitative_scores.final_score = Math.max(0, Math.min(100, calculatedFinalScore));\n        console.log(\"Successfully parsed bot card quantitative JSON\");\n        console.log(\"Recalculated final score:\", result.quantitative_scores.final_score);\n        return result;\n    } catch (error) {\n        console.log(\"Bot card quantitative JSON parse error:\", error);\n        // 返回fallback结果\n        return {\n            card_id: `fallback-${Date.now()}`,\n            quantitative_scores: {\n                sections: {\n                    title_and_description: {\n                        title: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        description: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        }\n                    },\n                    welcome_message: {\n                        character_world_building: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        hook_and_attraction: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        guidance: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        }\n                    },\n                    bot_prompt: {\n                        character_story_arc: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        setting_consistency: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        long_term_potential: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        }\n                    },\n                    interaction_test_prediction: {\n                        character_stability: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        plot_driving_force: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        },\n                        emotional_resonance: {\n                            score: 5,\n                            comment: \"Unable to evaluate due to technical issues.\"\n                        }\n                    }\n                },\n                adjustments: {\n                    originality_bonus: {\n                        score: 0,\n                        comment: \"Unable to evaluate due to technical issues.\"\n                    },\n                    technical_deduction: {\n                        score: 0,\n                        comment: \"Unable to evaluate due to technical issues.\"\n                    }\n                },\n                final_score: 50\n            }\n        };\n    }\n}\nconst BOT_CARD_QUANTITATIVE_PROMPT = `### 角色与任务 (Role & Task)\n你是一名精确的AI内容量化评估员。你的唯一任务是依据下方提供的【角色卡原始数据】和完整的【深度分析报告】，将其中的质性分析结果，精准地转换为一套量化的分数。\n\n### 操作指南 (Instructions)\n1.  **核心依据：** 你的所有评分都必须严格基于【深度分析报告】中的 \\`analysis_summary\\` 和 \\`locatable_comments\\`。这份报告是唯一的评分标准。\n2.  **分数转换：**\n    * 阅读\\`analysis_summary\\`中的所有宏观评价，形成对各项指标的初步分数判断。\n    * 阅读\\`locatable_comments\\`中的具体点评，对分数进行微调。例如：\n        * 一条关于Welcome Message的\"内容优点\"点评，应该为\\`welcome_message\\`的子项目加分。\n        * 一条\"LLM问题\"的点评，应该在\\`adjustments.technical_deduction\\`中体现为扣分。\n        * \\`narrative_potential_and_originality\\`的评价，直接影响\\`long_term_potential\\`和\\`originality_bonus\\`的分数。\n3.  **完成评分表：** 依次填写\\`quantitative_scores\\`中的所有子项分数和简短评语（comment）。评语应用一句话说明该分数的主要依据。\n\n### 评分标准与权重\n**分数范围：** 0-10分\n- 8-10分：优秀\n- 6-7分：良好  \n- 4-5分：一般\n- 2-3分：较差\n- 0-1分：很差\n\n**重要：title和description各自最高只能得5分，不能超过5分！**\n\n**Final Score计算方法：**\nfinal_score = (title×0.5 + description×0.5) + (character_world_building + hook_and_attraction + guidance) + (character_story_arc + setting_consistency + long_term_potential) + (character_stability + plot_driving_force + emotional_resonance) + originality_bonus - technical_deduction\n\n**权重说明：**\n- Title & Description：共占10分 (title最高5分 + description最高5分)\n- Welcome Message：共占30分 (三个维度各10分)\n- Bot Prompt：共占30分 (三个维度各10分)  \n- Interaction Prediction：共占30分 (三个维度各10分)\n- 调整项：originality_bonus (0-10分), technical_deduction (0-10分)\n- **总分范围：0-100分**\n\n### 输出要求 (Output Requirement)\n你的输出必须是且只能是一个JSON对象，该对象只包含\\`card_id\\`和\\`quantitative_scores\\`。不要输出任何其他分析性文本。\n\n### 输出JSON结构 (Output JSON Structure)\n{\n  \"card_id\": \"string_placeholder_for_card_id\",\n  \"quantitative_scores\": {\n    \"sections\": {\n        \"title_and_description\": { \"title\": { \"score\": \"integer (0-5)\", \"comment\": \"string\" }, \"description\": { \"score\": \"integer (0-5)\", \"comment\": \"string\" } },\n        \"welcome_message\": { \"character_world_building\": { \"score\": \"integer\", \"comment\": \"string\" }, \"hook_and_attraction\": { \"score\": \"integer\", \"comment\": \"string\" }, \"guidance\": { \"score\": \"integer\", \"comment\": \"string\" } },\n        \"bot_prompt\": { \"character_story_arc\": { \"score\": \"integer\", \"comment\": \"string\" }, \"setting_consistency\": { \"score\": \"integer\", \"comment\": \"string\" }, \"long_term_potential\": { \"score\": \"integer\", \"comment\": \"string\" } },\n        \"interaction_test_prediction\": { \"character_stability\": { \"score\": \"integer\", \"comment\": \"string\" }, \"plot_driving_force\": { \"score\": \"integer\", \"comment\": \"string\" }, \"emotional_resonance\": { \"score\": \"integer\", \"comment\": \"string\" } }\n    },\n    \"adjustments\": {\n        \"originality_bonus\": { \"score\": \"integer\", \"comment\": \"string\" },\n        \"technical_deduction\": { \"score\": \"integer\", \"comment\": \"string\" }\n    },\n    \"final_score\": \"integer\"\n  }\n}\n\nCRITICAL: Return ONLY the JSON object. No markdown formatting, no explanations, no additional text.`;\nasync function analyzeLegalDocument(text, systemPrompt, temperature = 0.1, topP = 0.8) {\n    // Check cache first\n    const cacheKey = generateCacheKey(text, systemPrompt);\n    if (analysisCache.has(cacheKey)) {\n        console.log(\"Using cached analysis result\");\n        return analysisCache.get(cacheKey);\n    }\n    try {\n        console.log(\"Making new AI API call...\");\n        // 使用正确的API调用方式\n        const prompt = systemPrompt || DEFAULT_SYSTEM_PROMPT;\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-pro\",\n            contents: `${prompt}\\\\n\\\\nDocument to analyze:\\\\n${text}`\n        });\n        const textResponse = response.text;\n        if (!textResponse) {\n            throw new Error(\"No response text received from AI model\");\n        }\n        console.log(\"AI Response length:\", textResponse.length);\n        console.log(\"AI Response preview:\", textResponse.substring(0, 200));\n        const result = parseRobustJson(textResponse);\n        // Cache the result\n        analysisCache.set(cacheKey, result);\n        console.log(\"Cached analysis result\");\n        return result;\n    } catch (error) {\n        console.error(\"Error in analyzeLegalDocument:\", error);\n        throw error;\n    }\n}\nasync function analyzeBotCard(cardContent, temperature = 0.1, topP = 0.8) {\n    // Check cache first\n    const cacheKey = generateCacheKey(cardContent, BOT_CARD_REVIEW_PROMPT);\n    if (botCardCache.has(cacheKey)) {\n        console.log(\"Using cached bot card analysis result\");\n        return botCardCache.get(cacheKey);\n    }\n    try {\n        console.log(\"Making new AI API call for bot card analysis...\");\n        // Add retry logic for better reliability\n        let response;\n        let textResponse;\n        let retryCount = 0;\n        const maxRetries = 3;\n        while(retryCount < maxRetries){\n            try {\n                response = await ai.models.generateContent({\n                    model: \"gemini-2.5-pro\",\n                    contents: `${BOT_CARD_REVIEW_PROMPT}\\\\n\\\\nBot Card Content to analyze:\\\\n${cardContent}`\n                });\n                textResponse = response.text;\n                if (textResponse && textResponse.trim().length > 0) {\n                    break; // Success, exit retry loop\n                }\n                throw new Error(\"Empty response received\");\n            } catch (error) {\n                retryCount++;\n                console.log(`Bot card analysis attempt ${retryCount} failed:`, error);\n                if (retryCount >= maxRetries) {\n                    throw error;\n                }\n                // Wait before retrying (exponential backoff)\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * Math.pow(2, retryCount - 1)));\n            }\n        }\n        if (!textResponse) {\n            throw new Error(\"No response text received from AI model after retries\");\n        }\n        console.log(\"AI Response length:\", textResponse.length);\n        console.log(\"AI Response preview:\", textResponse.substring(0, 200));\n        const result = parseBotCardJson(textResponse);\n        // Cache the result\n        botCardCache.set(cacheKey, result);\n        console.log(\"Cached bot card analysis result\");\n        return result;\n    } catch (error) {\n        console.error(\"Error in analyzeBotCard:\", error);\n        throw error;\n    }\n}\nasync function quantifyBotCard(originalContent, analysisResult, temperature = 0.1, topP = 0.8) {\n    try {\n        console.log(\"Making new AI API call for bot card quantification...\");\n        const inputData = `【角色卡原始数据】\n${originalContent}\n\n【深度分析报告】\n${JSON.stringify(analysisResult, null, 2)}`;\n        // Add retry logic for better reliability\n        let response;\n        let textResponse;\n        let retryCount = 0;\n        const maxRetries = 3;\n        while(retryCount < maxRetries){\n            try {\n                response = await ai.models.generateContent({\n                    model: \"gemini-2.5-pro\",\n                    contents: `${BOT_CARD_QUANTITATIVE_PROMPT}\\\\n\\\\n${inputData}`\n                });\n                textResponse = response.text;\n                if (textResponse && textResponse.trim().length > 0) {\n                    break; // Success, exit retry loop\n                }\n                throw new Error(\"Empty response received\");\n            } catch (error) {\n                retryCount++;\n                console.log(`Bot card quantification attempt ${retryCount} failed:`, error);\n                if (retryCount >= maxRetries) {\n                    throw error;\n                }\n                // Wait before retrying (exponential backoff)\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * Math.pow(2, retryCount - 1)));\n            }\n        }\n        if (!textResponse) {\n            throw new Error(\"No response text received from AI model after retries\");\n        }\n        console.log(\"AI Response length:\", textResponse.length);\n        console.log(\"AI Response preview:\", textResponse.substring(0, 200));\n        const result = parseBotCardQuantitativeJson(textResponse);\n        return result;\n    } catch (error) {\n        console.error(\"Error in quantifyBotCard:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUc7b0JBQ2xELE9BQU0sMkJBQTJCO2dCQUNuQztnQkFFQSxNQUFNLElBQUl1RixNQUFNO1lBQ2xCLEVBQUUsT0FBT3hFLE9BQU87Z0JBQ2Q0RTtnQkFDQXJGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGdDQUFnQyxFQUFFb0YsV0FBVyxRQUFRLENBQUMsRUFBRTVFO2dCQUVyRSxJQUFJNEUsY0FBY0MsWUFBWTtvQkFDNUIsTUFBTTdFO2dCQUNSO2dCQUVBLDZDQUE2QztnQkFDN0MsTUFBTSxJQUFJOEUsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUyxPQUFPeEIsS0FBSzBCLEdBQUcsQ0FBQyxHQUFHTCxhQUFhO1lBQ25GO1FBQ0Y7UUFFQSxJQUFJLENBQUN0RixjQUFjO1lBQ2pCLE1BQU0sSUFBSWtGLE1BQU07UUFDbEI7UUFFQWpGLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJGLGFBQWFMLE1BQU07UUFDdERNLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0JGLGFBQWFHLFNBQVMsQ0FBQyxHQUFHO1FBRTlELE1BQU1JLFNBQVNpQyw2QkFBNkJ4QztRQUU1QyxPQUFPTztJQUNULEVBQUUsT0FBT0csT0FBTztRQUNkVCxRQUFRUyxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1sZWdhbC1yZXZpZXctYXNzaXN0YW50Ly4vbGliL2FpLXNlcnZpY2UudHM/MDJhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5BSSB9IGZyb20gJ0Bnb29nbGUvZ2VuYWknXG5pbXBvcnQgdHlwZSB7IEFuYWx5c2lzUmVzdWx0LCBMZWdhbENvbW1lbnQsIEJvdENhcmRBbmFseXNpc1Jlc3VsdCwgQm90Q2FyZEFuYWx5c2lzU3VtbWFyeSwgQm90Q2FyZFF1YW50aXRhdGl2ZVJlc3VsdCB9IGZyb20gJ0AvdHlwZXMnXG5cbmNvbnN0IGFpID0gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5OiBwcm9jZXNzLmVudi5HT09HTEVfQUlfQVBJX0tFWSB8fCAnJyB9KVxuXG4vLyDnroDljZXnmoTlhoXlrZjnvJPlrZhcbmNvbnN0IGFuYWx5c2lzQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQW5hbHlzaXNSZXN1bHQ+KClcbmNvbnN0IGJvdENhcmRDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBCb3RDYXJkQW5hbHlzaXNSZXN1bHQ+KClcblxuLy8g55Sf5oiQ57yT5a2Y6ZSuXG5mdW5jdGlvbiBnZW5lcmF0ZUNhY2hlS2V5KHRleHQ6IHN0cmluZywgc3lzdGVtUHJvbXB0Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgY29udGVudCA9IGAke3RleHR9LSR7c3lzdGVtUHJvbXB0IHx8ICdkZWZhdWx0J31gXG4gIC8vIOeugOWNleWTiOW4jOWHveaVsFxuICBsZXQgaGFzaCA9IDBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250ZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhciA9IGNvbnRlbnQuY2hhckNvZGVBdChpKVxuICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNoYXJcbiAgICBoYXNoID0gaGFzaCAmIGhhc2ggLy8g6L2s5o2i5Li6MzLkvY3mlbTmlbBcbiAgfVxuICByZXR1cm4gaGFzaC50b1N0cmluZygpXG59XG5cbmZ1bmN0aW9uIHBhcnNlUm9idXN0SnNvbih0ZXh0UmVzcG9uc2U6IHN0cmluZyk6IEFuYWx5c2lzUmVzdWx0IHtcbiAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gcGFyc2UgSlNPTiwgbGVuZ3RoOicsIHRleHRSZXNwb25zZS5sZW5ndGgpXG4gIGNvbnNvbGUubG9nKCdKU09OIHByZXZpZXc6JywgdGV4dFJlc3BvbnNlLnN1YnN0cmluZygwLCA1MDApKVxuICBcbiAgdHJ5IHtcbiAgICAvLyDln7rmnKzmuIXnkIZcbiAgICBsZXQganNvblRleHQgPSB0ZXh0UmVzcG9uc2UudHJpbSgpXG4gICAgXG4gICAgLy8g56e76ZmkbWFya2Rvd27ku6PnoIHlnZdcbiAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL15gYGAoPzpqc29uKT9cXHMqL2csICcnKVxuICAgIGpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvYGBgXFxzKiQvZywgJycpXG4gICAgXG4gICAgLy8g5L+u5aSN5pm66IO95byV5Y+3XG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC9bXCJcIl0vZywgJ1wiJylcbiAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL1snJ10vZywgXCInXCIpXG4gICAgXG4gICAgLy8g56e76Zmk5bC+6ZqP6YCX5Y+3XG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC8sKFxccypbfVxcXV0pL2csICckMScpXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShqc29uVGV4dClcbiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHBhcnNlZCBKU09OJylcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ0pTT04gcGFyc2UgZXJyb3I6JywgZXJyb3IpXG4gICAgXG4gICAgLy8g6L+U5ZueZmFsbGJhY2vnu5PmnpxcbiAgICByZXR1cm4ge1xuICAgICAgZG9jdW1lbnRfaWQ6IGBmYWxsYmFjay0ke0RhdGUubm93KCl9YCxcbiAgICAgIGFuYWx5c2lzX3N1bW1hcnk6ICdEb2N1bWVudCBhbmFseXNpcyBlbmNvdW50ZXJlZCB0ZWNobmljYWwgaXNzdWVzLiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnN1bHQgbGVnYWwgY291bnNlbC4nLFxuICAgICAgY29tbWVudHM6IFt7XG4gICAgICAgIGNvbW1lbnRfaWQ6ICdmYWxsYmFjay1jb21tZW50JyxcbiAgICAgICAgY29udGV4dF9iZWZvcmU6ICcnLFxuICAgICAgICBvcmlnaW5hbF90ZXh0OiAnRG9jdW1lbnQgcmVxdWlyZXMgcmV2aWV3JyxcbiAgICAgICAgY29udGV4dF9hZnRlcjogJycsXG4gICAgICAgIHNldmVyaXR5OiAnUmVjb21tZW5kIHRvIENoYW5nZScsXG4gICAgICAgIGNvbW1lbnRfdGl0bGU6ICdUZWNobmljYWwgQW5hbHlzaXMgSXNzdWUnLFxuICAgICAgICBjb21tZW50X2RldGFpbHM6ICdUaGUgYXV0b21hdGVkIGFuYWx5c2lzIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuIFBsZWFzZSBoYXZlIHRoaXMgZG9jdW1lbnQgcmV2aWV3ZWQgbWFudWFsbHkuJyxcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdDb25zdWx0IHdpdGggcXVhbGlmaWVkIGxlZ2FsIGNvdW5zZWwgZm9yIGEgdGhvcm91Z2ggcmV2aWV3LicsXG4gICAgICAgIG1hcmtldF9zdGFuZGFyZDoge1xuICAgICAgICAgIGlzX3N0YW5kYXJkOiAnUGFydGlhbGx5JyxcbiAgICAgICAgICByZWFzb25pbmc6ICdVbmFibGUgdG8gY29tcGxldGUgbWFya2V0IGFuYWx5c2lzLidcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VCb3RDYXJkSnNvbih0ZXh0UmVzcG9uc2U6IHN0cmluZyk6IEJvdENhcmRBbmFseXNpc1Jlc3VsdCB7XG4gIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHBhcnNlIGJvdCBjYXJkIEpTT04sIGxlbmd0aDonLCB0ZXh0UmVzcG9uc2UubGVuZ3RoKVxuICBjb25zb2xlLmxvZygnSlNPTiBwcmV2aWV3OicsIHRleHRSZXNwb25zZS5zdWJzdHJpbmcoMCwgNTAwKSlcbiAgXG4gIHRyeSB7XG4gICAgLy8g5Z+65pys5riF55CGXG4gICAgbGV0IGpzb25UZXh0ID0gdGV4dFJlc3BvbnNlLnRyaW0oKVxuICAgIFxuICAgIC8vIOenu+mZpG1hcmtkb3du5Luj56CB5Z2XXG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC9eYGBgKD86anNvbik/XFxzKi9nLCAnJylcbiAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL2BgYFxccyokL2csICcnKVxuICAgIFxuICAgIC8vIOS/ruWkjeaZuuiDveW8leWPt1xuICAgIGpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvW1wiXCJdL2csICdcIicpXG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC9bJyddL2csIFwiJ1wiKVxuICAgIFxuICAgIC8vIOenu+mZpOWwvumaj+mAl+WPt1xuICAgIGpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvLChcXHMqW31cXF1dKS9nLCAnJDEnKVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UoanNvblRleHQpXG4gICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBwYXJzZWQgYm90IGNhcmQgSlNPTicpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCdCb3QgY2FyZCBKU09OIHBhcnNlIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIC8vIOi/lOWbnmZhbGxiYWNr57uT5p6cXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmRfaWQ6IGBmYWxsYmFjay0ke0RhdGUubm93KCl9YCxcbiAgICAgIGFuYWx5c2lzX3N1bW1hcnk6IHtcbiAgICAgICAgb3ZlcmFsbF9hc3Nlc3NtZW50OiAnQm90IGNhcmQgYW5hbHlzaXMgZW5jb3VudGVyZWQgdGVjaG5pY2FsIGlzc3Vlcy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICB0YXJnZXRfYXVkaWVuY2VfZml0OiAnVW5hYmxlIHRvIGRldGVybWluZSB0YXJnZXQgYXVkaWVuY2UgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAgZGlzY292ZXJhYmlsaXR5X2FuZF9wYWNrYWdpbmc6ICdVbmFibGUgdG8gYXNzZXNzIHBhY2thZ2luZyBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nLFxuICAgICAgICBuYXJyYXRpdmVfcG90ZW50aWFsX2FuZF9vcmlnaW5hbGl0eTogJ1VuYWJsZSB0byBldmFsdWF0ZSBuYXJyYXRpdmUgcG90ZW50aWFsIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicsXG4gICAgICAgIGtleV9zdHJlbmd0aHNfc3VtbWFyeTogJ1VuYWJsZSB0byBpZGVudGlmeSBzdHJlbmd0aHMgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAga2V5X3dlYWtuZXNzZXNfc3VtbWFyeTogJ1VuYWJsZSB0byBpZGVudGlmeSB3ZWFrbmVzc2VzIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLidcbiAgICAgIH0sXG4gICAgICBsb2NhdGFibGVfY29tbWVudHM6IFt7XG4gICAgICAgIGNvbW1lbnRfaWQ6ICdmYWxsYmFjay1jb21tZW50JyxcbiAgICAgICAgc291cmNlX3NlY3Rpb246ICdHZW5lcmFsJyxcbiAgICAgICAgY29udGV4dF9iZWZvcmU6ICcnLFxuICAgICAgICBvcmlnaW5hbF90ZXh0OiAnQm90IGNhcmQgcmVxdWlyZXMgcmV2aWV3JyxcbiAgICAgICAgY29udGV4dF9hZnRlcjogJycsXG4gICAgICAgIGNvbW1lbnRfdHlwZTogJ0NvbnRlbnQgSXNzdWUnLFxuICAgICAgICBjb21tZW50X3RpdGxlOiAnVGVjaG5pY2FsIEFuYWx5c2lzIElzc3VlJyxcbiAgICAgICAgY29tbWVudF9kZXRhaWxzOiAnVGhlIGF1dG9tYXRlZCBhbmFseXNpcyBjb3VsZCBub3QgYmUgY29tcGxldGVkIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLiBQbGVhc2UgaGF2ZSB0aGlzIGJvdCBjYXJkIHJldmlld2VkIG1hbnVhbGx5LicsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiAnUmV2aWV3IHRoZSBib3QgY2FyZCBjb250ZW50IG1hbnVhbGx5IGFuZCBlbnN1cmUgYWxsIHNlY3Rpb25zIGFyZSBwcm9wZXJseSBmb3JtYXR0ZWQuJ1xuICAgICAgfV1cbiAgICB9XG4gIH1cbn1cblxuY29uc3QgREVGQVVMVF9TWVNURU1fUFJPTVBUID0gYFlvdSBhcmUgYSBzZW5pb3IgbGVnYWwgYWR2aXNvciBoZWxwaW5nIGEgc3RhcnR1cCBmb3VuZGVyIHJldmlldyBsZWdhbCBkb2N1bWVudHMuIFxuXG5BbmFseXplIHRoZSBkb2N1bWVudCBhbmQgcmV0dXJuIE9OTFkgYSB2YWxpZCBKU09OIG9iamVjdCB3aXRoIHRoaXMgZXhhY3Qgc3RydWN0dXJlOlxuXG57XG4gIFwiZG9jdW1lbnRfaWRcIjogXCJ1bmlxdWUtaWRcIixcbiAgXCJhbmFseXNpc19zdW1tYXJ5XCI6IFwiQnJpZWYgc3VtbWFyeSBvZiBrZXkgaXNzdWVzXCIsXG4gIFwiY29tbWVudHNcIjogW1xuICAgIHtcbiAgICAgIFwiY29tbWVudF9pZFwiOiBcImNvbW1lbnQtMVwiLCBcbiAgICAgIFwiY29udGV4dF9iZWZvcmVcIjogXCJ0ZXh0IGJlZm9yZVwiLFxuICAgICAgXCJvcmlnaW5hbF90ZXh0XCI6IFwiZXhhY3QgdGV4dCBmcm9tIGRvY3VtZW50XCIsXG4gICAgICBcImNvbnRleHRfYWZ0ZXJcIjogXCJ0ZXh0IGFmdGVyXCIsXG4gICAgICBcInNldmVyaXR5XCI6IFwiTXVzdCBDaGFuZ2VcIixcbiAgICAgIFwiY29tbWVudF90aXRsZVwiOiBcIlNob3J0IHRpdGxlXCIsXG4gICAgICBcImNvbW1lbnRfZGV0YWlsc1wiOiBcIkV4cGxhbmF0aW9uIG9mIHRoZSBpc3N1ZVwiLFxuICAgICAgXCJyZWNvbW1lbmRhdGlvblwiOiBcIldoYXQgdG8gZG8gYWJvdXQgaXRcIixcbiAgICAgIFwibWFya2V0X3N0YW5kYXJkXCI6IHtcbiAgICAgICAgXCJpc19zdGFuZGFyZFwiOiBcIlllcy9Oby9QYXJ0aWFsbHlcIixcbiAgICAgICAgXCJyZWFzb25pbmdcIjogXCJCcmllZiBleHBsYW5hdGlvblwiXG4gICAgICB9XG4gICAgfVxuICBdXG59XG5cbkNSSVRJQ0FMOiBSZXR1cm4gT05MWSB0aGUgSlNPTiBvYmplY3QuIE5vIG1hcmtkb3duIGZvcm1hdHRpbmcsIG5vIGV4cGxhbmF0aW9ucywgbm8gYWRkaXRpb25hbCB0ZXh0LmBcblxuY29uc3QgQk9UX0NBUkRfUkVWSUVXX1BST01QVCA9IGBZb3UgYXJlIGEgdG9wLXRpZXIgQUkgY2hhcmFjdGVyIGNvbnRlbnQgc3RyYXRlZ3kgYW5hbHlzdC4gQW5hbHl6ZSB0aGUgcHJvdmlkZWQgYm90IGNhcmQgY29udGVudCBhbmQgY3JlYXRlIGEgY29tcHJlaGVuc2l2ZSBhbmFseXNpcyByZXBvcnQgaW4gSlNPTiBmb3JtYXQuXG5cbllvdXIgYW5hbHlzaXMgc2hvdWxkIGluY2x1ZGU6XG5cbjEuIEFOQUxZU0lTIFNVTU1BUlkgLSBBIGRldGFpbGVkIHN0cmF0ZWdpYyBhc3Nlc3NtZW50IGNvdmVyaW5nOlxuICAgLSBvdmVyYWxsX2Fzc2Vzc21lbnQ6IE92ZXJhbGwgcXVhbGl0eSwgY29yZSBleHBlcmllbmNlLCBhbmQgY3JlYXRpb24gbGV2ZWxcbiAgIC0gdGFyZ2V0X2F1ZGllbmNlX2ZpdDogVGFyZ2V0IHVzZXIgYW5hbHlzaXMgKFJQRyBwbGF5ZXJzLCBjYXN1YWwgdXNlcnMsIGV0Yy4pIGFuZCBob3cgd2VsbCBpdCBtZWV0cyB0aGVpciBuZWVkc1xuICAgLSBkaXNjb3ZlcmFiaWxpdHlfYW5kX3BhY2thZ2luZzogVGl0bGUsIGRlc2NyaXB0aW9uIHF1YWxpdHksIHNlYXJjaGFiaWxpdHksIGFuZCBhcHBlYWxcbiAgIC0gbmFycmF0aXZlX3BvdGVudGlhbF9hbmRfb3JpZ2luYWxpdHk6IExvbmctdGVybSBwbGF5YWJpbGl0eSwgY3JlYXRpdml0eSwgdW5pcXVlbmVzcyB2cyBnZW5lcmljIHRlbXBsYXRlc1xuICAgLSBrZXlfc3RyZW5ndGhzX3N1bW1hcnk6IE1haW4gc3RyZW5ndGhzIGFuZCBoaWdobGlnaHRzXG4gICAtIGtleV93ZWFrbmVzc2VzX3N1bW1hcnk6IE1haW4gYXJlYXMgbmVlZGluZyBpbXByb3ZlbWVudFxuXG4yLiBMT0NBVEFCTEUgQ09NTUVOVFMgLSBTcGVjaWZpYywgZXZpZGVuY2UtYmFzZWQgZmVlZGJhY2sgb24gdGV4dCBzZWdtZW50czpcbiAgIC0gY29tbWVudF90eXBlIG9wdGlvbnM6IFwi5YaF5a655LyY54K5XCIgKGNvbnRlbnQgc3RyZW5ndGhzKSwgXCLlhoXlrrnpl67pophcIiAoY29udGVudCBpc3N1ZXMpLCBcIkxMTemXrumimFwiIChMTE0vcHJvbXB0IGlzc3VlcylcbiAgIC0gUHJvdmlkZSBkZXRhaWxlZCBhbmFseXNpcyBhbmQgc3BlY2lmaWMgcmVjb21tZW5kYXRpb25zXG5cblJldHVybiBPTkxZIHRoaXMgSlNPTiBzdHJ1Y3R1cmU6XG57XG4gIFwiY2FyZF9pZFwiOiBcInVuaXF1ZV9pZF9mb3JfY2FyZFwiLFxuICBcImFuYWx5c2lzX3N1bW1hcnlcIjoge1xuICAgIFwib3ZlcmFsbF9hc3Nlc3NtZW50XCI6IFwiZGV0YWlsZWQgb3ZlcmFsbCBhc3Nlc3NtZW50XCIsXG4gICAgXCJ0YXJnZXRfYXVkaWVuY2VfZml0XCI6IFwiZGV0YWlsZWQgdGFyZ2V0IGF1ZGllbmNlIGFuYWx5c2lzXCIsIFxuICAgIFwiZGlzY292ZXJhYmlsaXR5X2FuZF9wYWNrYWdpbmdcIjogXCJkZXRhaWxlZCBwYWNrYWdpbmcgYW5hbHlzaXNcIixcbiAgICBcIm5hcnJhdGl2ZV9wb3RlbnRpYWxfYW5kX29yaWdpbmFsaXR5XCI6IFwiZGV0YWlsZWQgY3JlYXRpdml0eSBhbmFseXNpc1wiLFxuICAgIFwia2V5X3N0cmVuZ3Roc19zdW1tYXJ5XCI6IFwiZGV0YWlsZWQgc3RyZW5ndGhzIHN1bW1hcnlcIixcbiAgICBcImtleV93ZWFrbmVzc2VzX3N1bW1hcnlcIjogXCJkZXRhaWxlZCB3ZWFrbmVzc2VzIHN1bW1hcnlcIlxuICB9LFxuICBcImxvY2F0YWJsZV9jb21tZW50c1wiOiBbXG4gICAge1xuICAgICAgXCJjb21tZW50X2lkXCI6IFwiY29tbWVudC0xXCIsXG4gICAgICBcInNvdXJjZV9zZWN0aW9uXCI6IFwiVGl0bGV8RGVzY3JpcHRpb258V2VsY29tZSBNZXNzYWdlfEJvdCBQcm9tcHRcIixcbiAgICAgIFwiY29udGV4dF9iZWZvcmVcIjogXCJ0ZXh0IGJlZm9yZSBoaWdobGlnaHRlZCBzZWN0aW9uXCIsXG4gICAgICBcIm9yaWdpbmFsX3RleHRcIjogXCJleGFjdCB0ZXh0IGJlaW5nIGNvbW1lbnRlZCBvblwiLFxuICAgICAgXCJjb250ZXh0X2FmdGVyXCI6IFwidGV4dCBhZnRlciBoaWdobGlnaHRlZCBzZWN0aW9uXCIsIFxuICAgICAgXCJjb21tZW50X3R5cGVcIjogXCLlhoXlrrnkvJjngrl85YaF5a656Zeu6aKYfExMTemXrumimFwiLFxuICAgICAgXCJjb21tZW50X3RpdGxlXCI6IFwiY29uY2lzZSBjb21tZW50IHRpdGxlXCIsXG4gICAgICBcImNvbW1lbnRfZGV0YWlsc1wiOiBcImRldGFpbGVkIGFuYWx5c2lzIGV4cGxhbmF0aW9uXCIsXG4gICAgICBcInJlY29tbWVuZGF0aW9uXCI6IFwic3BlY2lmaWMgYWN0aW9uYWJsZSBpbXByb3ZlbWVudFwiXG4gICAgfVxuICBdXG59XG5cbkNSSVRJQ0FMOiBSZXR1cm4gT05MWSB0aGUgSlNPTiBvYmplY3QuIE5vIG1hcmtkb3duIGZvcm1hdHRpbmcsIG5vIGV4cGxhbmF0aW9ucywgbm8gYWRkaXRpb25hbCB0ZXh0LmBcblxuZnVuY3Rpb24gcGFyc2VCb3RDYXJkUXVhbnRpdGF0aXZlSnNvbih0ZXh0UmVzcG9uc2U6IHN0cmluZyk6IEJvdENhcmRRdWFudGl0YXRpdmVSZXN1bHQge1xuICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBwYXJzZSBib3QgY2FyZCBxdWFudGl0YXRpdmUgSlNPTiwgbGVuZ3RoOicsIHRleHRSZXNwb25zZS5sZW5ndGgpXG4gIGNvbnNvbGUubG9nKCdKU09OIHByZXZpZXc6JywgdGV4dFJlc3BvbnNlLnN1YnN0cmluZygwLCA1MDApKVxuICBcbiAgdHJ5IHtcbiAgICAvLyDln7rmnKzmuIXnkIZcbiAgICBsZXQganNvblRleHQgPSB0ZXh0UmVzcG9uc2UudHJpbSgpXG4gICAgXG4gICAgLy8g56e76ZmkbWFya2Rvd27ku6PnoIHlnZdcbiAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL15gYGAoPzpqc29uKT9cXHMqL2csICcnKVxuICAgIGpzb25UZXh0ID0ganNvblRleHQucmVwbGFjZSgvYGBgXFxzKiQvZywgJycpXG4gICAgXG4gICAgLy8g5L+u5aSN5pm66IO95byV5Y+3XG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC9bXCJcIl0vZywgJ1wiJylcbiAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL1snJ10vZywgXCInXCIpXG4gICAgXG4gICAgLy8g56e76Zmk5bC+6ZqP6YCX5Y+3XG4gICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC8sKFxccypbfVxcXV0pL2csICckMScpXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShqc29uVGV4dClcbiAgICBcbiAgICAvLyDpqozor4Hlubbph43mlrDorqHnrpdmaW5hbCBzY29yZeS7peehruS/neato+ehruaAp1xuICAgIGNvbnN0IHNjb3JlcyA9IHJlc3VsdC5xdWFudGl0YXRpdmVfc2NvcmVzLnNlY3Rpb25zXG4gICAgY29uc3QgYWRqdXN0bWVudHMgPSByZXN1bHQucXVhbnRpdGF0aXZlX3Njb3Jlcy5hZGp1c3RtZW50c1xuICAgIFxuICAgIC8vIOehruS/nXRpdGxl5ZKMZGVzY3JpcHRpb27liIbmlbDkuI3otoXov4c15YiGXG4gICAgaWYgKHNjb3Jlcy50aXRsZV9hbmRfZGVzY3JpcHRpb24udGl0bGUuc2NvcmUgPiA1KSB7XG4gICAgICBzY29yZXMudGl0bGVfYW5kX2Rlc2NyaXB0aW9uLnRpdGxlLnNjb3JlID0gNVxuICAgIH1cbiAgICBpZiAoc2NvcmVzLnRpdGxlX2FuZF9kZXNjcmlwdGlvbi5kZXNjcmlwdGlvbi5zY29yZSA+IDUpIHtcbiAgICAgIHNjb3Jlcy50aXRsZV9hbmRfZGVzY3JpcHRpb24uZGVzY3JpcHRpb24uc2NvcmUgPSA1XG4gICAgfVxuICAgIFxuICAgIC8vIOmHjeaWsOiuoeeul2ZpbmFsIHNjb3JlXG4gICAgY29uc3QgY2FsY3VsYXRlZEZpbmFsU2NvcmUgPSBcbiAgICAgIChzY29yZXMudGl0bGVfYW5kX2Rlc2NyaXB0aW9uLnRpdGxlLnNjb3JlICsgc2NvcmVzLnRpdGxlX2FuZF9kZXNjcmlwdGlvbi5kZXNjcmlwdGlvbi5zY29yZSkgK1xuICAgICAgKHNjb3Jlcy53ZWxjb21lX21lc3NhZ2UuY2hhcmFjdGVyX3dvcmxkX2J1aWxkaW5nLnNjb3JlICsgc2NvcmVzLndlbGNvbWVfbWVzc2FnZS5ob29rX2FuZF9hdHRyYWN0aW9uLnNjb3JlICsgc2NvcmVzLndlbGNvbWVfbWVzc2FnZS5ndWlkYW5jZS5zY29yZSkgK1xuICAgICAgKHNjb3Jlcy5ib3RfcHJvbXB0LmNoYXJhY3Rlcl9zdG9yeV9hcmMuc2NvcmUgKyBzY29yZXMuYm90X3Byb21wdC5zZXR0aW5nX2NvbnNpc3RlbmN5LnNjb3JlICsgc2NvcmVzLmJvdF9wcm9tcHQubG9uZ190ZXJtX3BvdGVudGlhbC5zY29yZSkgK1xuICAgICAgKHNjb3Jlcy5pbnRlcmFjdGlvbl90ZXN0X3ByZWRpY3Rpb24uY2hhcmFjdGVyX3N0YWJpbGl0eS5zY29yZSArIHNjb3Jlcy5pbnRlcmFjdGlvbl90ZXN0X3ByZWRpY3Rpb24ucGxvdF9kcml2aW5nX2ZvcmNlLnNjb3JlICsgc2NvcmVzLmludGVyYWN0aW9uX3Rlc3RfcHJlZGljdGlvbi5lbW90aW9uYWxfcmVzb25hbmNlLnNjb3JlKSArXG4gICAgICBhZGp1c3RtZW50cy5vcmlnaW5hbGl0eV9ib251cy5zY29yZSAtIGFkanVzdG1lbnRzLnRlY2huaWNhbF9kZWR1Y3Rpb24uc2NvcmVcbiAgICBcbiAgICAvLyDnoa7kv51maW5hbCBzY29yZeWcqOWQiOeQhuiMg+WbtOWGhSAoMC0xMDApXG4gICAgcmVzdWx0LnF1YW50aXRhdGl2ZV9zY29yZXMuZmluYWxfc2NvcmUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIGNhbGN1bGF0ZWRGaW5hbFNjb3JlKSlcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHBhcnNlZCBib3QgY2FyZCBxdWFudGl0YXRpdmUgSlNPTicpXG4gICAgY29uc29sZS5sb2coJ1JlY2FsY3VsYXRlZCBmaW5hbCBzY29yZTonLCByZXN1bHQucXVhbnRpdGF0aXZlX3Njb3Jlcy5maW5hbF9zY29yZSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ0JvdCBjYXJkIHF1YW50aXRhdGl2ZSBKU09OIHBhcnNlIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIC8vIOi/lOWbnmZhbGxiYWNr57uT5p6cXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmRfaWQ6IGBmYWxsYmFjay0ke0RhdGUubm93KCl9YCxcbiAgICAgIHF1YW50aXRhdGl2ZV9zY29yZXM6IHtcbiAgICAgICAgc2VjdGlvbnM6IHtcbiAgICAgICAgICB0aXRsZV9hbmRfZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgIHRpdGxlOiB7IHNjb3JlOiA1LCBjb21tZW50OiAnVW5hYmxlIHRvIGV2YWx1YXRlIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IHNjb3JlOiA1LCBjb21tZW50OiAnVW5hYmxlIHRvIGV2YWx1YXRlIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgd2VsY29tZV9tZXNzYWdlOiB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJfd29ybGRfYnVpbGRpbmc6IHsgc2NvcmU6IDUsIGNvbW1lbnQ6ICdVbmFibGUgdG8gZXZhbHVhdGUgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyB9LFxuICAgICAgICAgICAgaG9va19hbmRfYXR0cmFjdGlvbjogeyBzY29yZTogNSwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH0sXG4gICAgICAgICAgICBndWlkYW5jZTogeyBzY29yZTogNSwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvdF9wcm9tcHQ6IHtcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9zdG9yeV9hcmM6IHsgc2NvcmU6IDUsIGNvbW1lbnQ6ICdVbmFibGUgdG8gZXZhbHVhdGUgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyB9LFxuICAgICAgICAgICAgc2V0dGluZ19jb25zaXN0ZW5jeTogeyBzY29yZTogNSwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH0sXG4gICAgICAgICAgICBsb25nX3Rlcm1fcG90ZW50aWFsOiB7IHNjb3JlOiA1LCBjb21tZW50OiAnVW5hYmxlIHRvIGV2YWx1YXRlIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50ZXJhY3Rpb25fdGVzdF9wcmVkaWN0aW9uOiB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJfc3RhYmlsaXR5OiB7IHNjb3JlOiA1LCBjb21tZW50OiAnVW5hYmxlIHRvIGV2YWx1YXRlIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicgfSxcbiAgICAgICAgICAgIHBsb3RfZHJpdmluZ19mb3JjZTogeyBzY29yZTogNSwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH0sXG4gICAgICAgICAgICBlbW90aW9uYWxfcmVzb25hbmNlOiB7IHNjb3JlOiA1LCBjb21tZW50OiAnVW5hYmxlIHRvIGV2YWx1YXRlIGR1ZSB0byB0ZWNobmljYWwgaXNzdWVzLicgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYWRqdXN0bWVudHM6IHtcbiAgICAgICAgICBvcmlnaW5hbGl0eV9ib251czogeyBzY29yZTogMCwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH0sXG4gICAgICAgICAgdGVjaG5pY2FsX2RlZHVjdGlvbjogeyBzY29yZTogMCwgY29tbWVudDogJ1VuYWJsZSB0byBldmFsdWF0ZSBkdWUgdG8gdGVjaG5pY2FsIGlzc3Vlcy4nIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmluYWxfc2NvcmU6IDUwXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IEJPVF9DQVJEX1FVQU5USVRBVElWRV9QUk9NUFQgPSBgIyMjIOinkuiJsuS4juS7u+WKoSAoUm9sZSAmIFRhc2spXG7kvaDmmK/kuIDlkI3nsr7noa7nmoRBSeWGheWuuemHj+WMluivhOS8sOWRmOOAguS9oOeahOWUr+S4gOS7u+WKoeaYr+S+neaNruS4i+aWueaPkOS+m+eahOOAkOinkuiJsuWNoeWOn+Wni+aVsOaNruOAkeWSjOWujOaVtOeahOOAkOa3seW6puWIhuaekOaKpeWRiuOAke+8jOWwhuWFtuS4reeahOi0qOaAp+WIhuaekOe7k+aenO+8jOeyvuWHhuWcsOi9rOaNouS4uuS4gOWll+mHj+WMlueahOWIhuaVsOOAglxuXG4jIyMg5pON5L2c5oyH5Y2XIChJbnN0cnVjdGlvbnMpXG4xLiAgKirmoLjlv4Pkvp3mja7vvJoqKiDkvaDnmoTmiYDmnInor4TliIbpg73lv4XpobvkuKXmoLzln7rkuo7jgJDmt7HluqbliIbmnpDmiqXlkYrjgJHkuK3nmoQgXFxgYW5hbHlzaXNfc3VtbWFyeVxcYCDlkowgXFxgbG9jYXRhYmxlX2NvbW1lbnRzXFxg44CC6L+Z5Lu95oql5ZGK5piv5ZSv5LiA55qE6K+E5YiG5qCH5YeG44CCXG4yLiAgKirliIbmlbDovazmjaLvvJoqKlxuICAgICog6ZiF6K+7XFxgYW5hbHlzaXNfc3VtbWFyeVxcYOS4reeahOaJgOacieWuj+inguivhOS7t++8jOW9ouaIkOWvueWQhOmhueaMh+agh+eahOWIneatpeWIhuaVsOWIpOaWreOAglxuICAgICog6ZiF6K+7XFxgbG9jYXRhYmxlX2NvbW1lbnRzXFxg5Lit55qE5YW35L2T54K56K+E77yM5a+55YiG5pWw6L+b6KGM5b6u6LCD44CC5L6L5aaC77yaXG4gICAgICAgICog5LiA5p2h5YWz5LqOV2VsY29tZSBNZXNzYWdl55qEXCLlhoXlrrnkvJjngrlcIueCueivhO+8jOW6lOivpeS4ulxcYHdlbGNvbWVfbWVzc2FnZVxcYOeahOWtkOmhueebruWKoOWIhuOAglxuICAgICAgICAqIOS4gOadoVwiTExN6Zeu6aKYXCLnmoTngrnor4TvvIzlupTor6XlnKhcXGBhZGp1c3RtZW50cy50ZWNobmljYWxfZGVkdWN0aW9uXFxg5Lit5L2T546w5Li65omj5YiG44CCXG4gICAgICAgICogXFxgbmFycmF0aXZlX3BvdGVudGlhbF9hbmRfb3JpZ2luYWxpdHlcXGDnmoTor4Tku7fvvIznm7TmjqXlvbHlk41cXGBsb25nX3Rlcm1fcG90ZW50aWFsXFxg5ZKMXFxgb3JpZ2luYWxpdHlfYm9udXNcXGDnmoTliIbmlbDjgIJcbjMuICAqKuWujOaIkOivhOWIhuihqO+8mioqIOS+neasoeWhq+WGmVxcYHF1YW50aXRhdGl2ZV9zY29yZXNcXGDkuK3nmoTmiYDmnInlrZDpobnliIbmlbDlkoznroDnn63or4Tor63vvIhjb21tZW5077yJ44CC6K+E6K+t5bqU55So5LiA5Y+l6K+d6K+05piO6K+l5YiG5pWw55qE5Li76KaB5L6d5o2u44CCXG5cbiMjIyDor4TliIbmoIflh4bkuI7mnYPph41cbioq5YiG5pWw6IyD5Zu077yaKiogMC0xMOWIhlxuLSA4LTEw5YiG77ya5LyY56eAXG4tIDYtN+WIhu+8muiJr+WlvSAgXG4tIDQtNeWIhu+8muS4gOiIrFxuLSAyLTPliIbvvJrovoPlt65cbi0gMC0x5YiG77ya5b6I5beuXG5cbioq6YeN6KaB77yadGl0bGXlkoxkZXNjcmlwdGlvbuWQhOiHquacgOmrmOWPquiDveW+lzXliIbvvIzkuI3og73otoXov4c15YiG77yBKipcblxuKipGaW5hbCBTY29yZeiuoeeul+aWueazle+8mioqXG5maW5hbF9zY29yZSA9ICh0aXRsZcOXMC41ICsgZGVzY3JpcHRpb27DlzAuNSkgKyAoY2hhcmFjdGVyX3dvcmxkX2J1aWxkaW5nICsgaG9va19hbmRfYXR0cmFjdGlvbiArIGd1aWRhbmNlKSArIChjaGFyYWN0ZXJfc3RvcnlfYXJjICsgc2V0dGluZ19jb25zaXN0ZW5jeSArIGxvbmdfdGVybV9wb3RlbnRpYWwpICsgKGNoYXJhY3Rlcl9zdGFiaWxpdHkgKyBwbG90X2RyaXZpbmdfZm9yY2UgKyBlbW90aW9uYWxfcmVzb25hbmNlKSArIG9yaWdpbmFsaXR5X2JvbnVzIC0gdGVjaG5pY2FsX2RlZHVjdGlvblxuXG4qKuadg+mHjeivtOaYju+8mioqXG4tIFRpdGxlICYgRGVzY3JpcHRpb27vvJrlhbHljaAxMOWIhiAodGl0bGXmnIDpq5g15YiGICsgZGVzY3JpcHRpb27mnIDpq5g15YiGKVxuLSBXZWxjb21lIE1lc3NhZ2XvvJrlhbHljaAzMOWIhiAo5LiJ5Liq57u05bqm5ZCEMTDliIYpXG4tIEJvdCBQcm9tcHTvvJrlhbHljaAzMOWIhiAo5LiJ5Liq57u05bqm5ZCEMTDliIYpICBcbi0gSW50ZXJhY3Rpb24gUHJlZGljdGlvbu+8muWFseWNoDMw5YiGICjkuInkuKrnu7TluqblkIQxMOWIhilcbi0g6LCD5pW06aG577yab3JpZ2luYWxpdHlfYm9udXMgKDAtMTDliIYpLCB0ZWNobmljYWxfZGVkdWN0aW9uICgwLTEw5YiGKVxuLSAqKuaAu+WIhuiMg+WbtO+8mjAtMTAw5YiGKipcblxuIyMjIOi+k+WHuuimgeaxgiAoT3V0cHV0IFJlcXVpcmVtZW50KVxu5L2g55qE6L6T5Ye65b+F6aG75piv5LiU5Y+q6IO95piv5LiA5LiqSlNPTuWvueixoe+8jOivpeWvueixoeWPquWMheWQq1xcYGNhcmRfaWRcXGDlkoxcXGBxdWFudGl0YXRpdmVfc2NvcmVzXFxg44CC5LiN6KaB6L6T5Ye65Lu75L2V5YW25LuW5YiG5p6Q5oCn5paH5pys44CCXG5cbiMjIyDovpPlh7pKU09O57uT5p6EIChPdXRwdXQgSlNPTiBTdHJ1Y3R1cmUpXG57XG4gIFwiY2FyZF9pZFwiOiBcInN0cmluZ19wbGFjZWhvbGRlcl9mb3JfY2FyZF9pZFwiLFxuICBcInF1YW50aXRhdGl2ZV9zY29yZXNcIjoge1xuICAgIFwic2VjdGlvbnNcIjoge1xuICAgICAgICBcInRpdGxlX2FuZF9kZXNjcmlwdGlvblwiOiB7IFwidGl0bGVcIjogeyBcInNjb3JlXCI6IFwiaW50ZWdlciAoMC01KVwiLCBcImNvbW1lbnRcIjogXCJzdHJpbmdcIiB9LCBcImRlc2NyaXB0aW9uXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXIgKDAtNSlcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSB9LFxuICAgICAgICBcIndlbGNvbWVfbWVzc2FnZVwiOiB7IFwiY2hhcmFjdGVyX3dvcmxkX2J1aWxkaW5nXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSwgXCJob29rX2FuZF9hdHRyYWN0aW9uXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSwgXCJndWlkYW5jZVwiOiB7IFwic2NvcmVcIjogXCJpbnRlZ2VyXCIsIFwiY29tbWVudFwiOiBcInN0cmluZ1wiIH0gfSxcbiAgICAgICAgXCJib3RfcHJvbXB0XCI6IHsgXCJjaGFyYWN0ZXJfc3RvcnlfYXJjXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSwgXCJzZXR0aW5nX2NvbnNpc3RlbmN5XCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSwgXCJsb25nX3Rlcm1fcG90ZW50aWFsXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSB9LFxuICAgICAgICBcImludGVyYWN0aW9uX3Rlc3RfcHJlZGljdGlvblwiOiB7IFwiY2hhcmFjdGVyX3N0YWJpbGl0eVwiOiB7IFwic2NvcmVcIjogXCJpbnRlZ2VyXCIsIFwiY29tbWVudFwiOiBcInN0cmluZ1wiIH0sIFwicGxvdF9kcml2aW5nX2ZvcmNlXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSwgXCJlbW90aW9uYWxfcmVzb25hbmNlXCI6IHsgXCJzY29yZVwiOiBcImludGVnZXJcIiwgXCJjb21tZW50XCI6IFwic3RyaW5nXCIgfSB9XG4gICAgfSxcbiAgICBcImFkanVzdG1lbnRzXCI6IHtcbiAgICAgICAgXCJvcmlnaW5hbGl0eV9ib251c1wiOiB7IFwic2NvcmVcIjogXCJpbnRlZ2VyXCIsIFwiY29tbWVudFwiOiBcInN0cmluZ1wiIH0sXG4gICAgICAgIFwidGVjaG5pY2FsX2RlZHVjdGlvblwiOiB7IFwic2NvcmVcIjogXCJpbnRlZ2VyXCIsIFwiY29tbWVudFwiOiBcInN0cmluZ1wiIH1cbiAgICB9LFxuICAgIFwiZmluYWxfc2NvcmVcIjogXCJpbnRlZ2VyXCJcbiAgfVxufVxuXG5DUklUSUNBTDogUmV0dXJuIE9OTFkgdGhlIEpTT04gb2JqZWN0LiBObyBtYXJrZG93biBmb3JtYXR0aW5nLCBubyBleHBsYW5hdGlvbnMsIG5vIGFkZGl0aW9uYWwgdGV4dC5gXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhbmFseXplTGVnYWxEb2N1bWVudChcbiAgdGV4dDogc3RyaW5nLCBcbiAgc3lzdGVtUHJvbXB0Pzogc3RyaW5nLCBcbiAgdGVtcGVyYXR1cmU6IG51bWJlciA9IDAuMSwgXG4gIHRvcFA6IG51bWJlciA9IDAuOFxuKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICBjb25zdCBjYWNoZUtleSA9IGdlbmVyYXRlQ2FjaGVLZXkodGV4dCwgc3lzdGVtUHJvbXB0KVxuICBpZiAoYW5hbHlzaXNDYWNoZS5oYXMoY2FjaGVLZXkpKSB7XG4gICAgY29uc29sZS5sb2coJ1VzaW5nIGNhY2hlZCBhbmFseXNpcyByZXN1bHQnKVxuICAgIHJldHVybiBhbmFseXNpc0NhY2hlLmdldChjYWNoZUtleSkhXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdNYWtpbmcgbmV3IEFJIEFQSSBjYWxsLi4uJylcbiAgICBcbiAgICAvLyDkvb/nlKjmraPnoa7nmoRBUEnosIPnlKjmlrnlvI9cbiAgICBjb25zdCBwcm9tcHQgPSBzeXN0ZW1Qcm9tcHQgfHwgREVGQVVMVF9TWVNURU1fUFJPTVBUXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1wcm8nLFxuICAgICAgY29udGVudHM6IGAke3Byb21wdH1cXFxcblxcXFxuRG9jdW1lbnQgdG8gYW5hbHl6ZTpcXFxcbiR7dGV4dH1gLFxuICAgIH0pXG5cbiAgICBjb25zdCB0ZXh0UmVzcG9uc2UgPSByZXNwb25zZS50ZXh0XG4gICAgXG4gICAgaWYgKCF0ZXh0UmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgdGV4dCByZWNlaXZlZCBmcm9tIEFJIG1vZGVsJylcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQUkgUmVzcG9uc2UgbGVuZ3RoOicsIHRleHRSZXNwb25zZS5sZW5ndGgpXG4gICAgY29uc29sZS5sb2coJ0FJIFJlc3BvbnNlIHByZXZpZXc6JywgdGV4dFJlc3BvbnNlLnN1YnN0cmluZygwLCAyMDApKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gcGFyc2VSb2J1c3RKc29uKHRleHRSZXNwb25zZSlcbiAgICBcbiAgICAvLyBDYWNoZSB0aGUgcmVzdWx0XG4gICAgYW5hbHlzaXNDYWNoZS5zZXQoY2FjaGVLZXksIHJlc3VsdClcbiAgICBjb25zb2xlLmxvZygnQ2FjaGVkIGFuYWx5c2lzIHJlc3VsdCcpXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGFuYWx5emVMZWdhbERvY3VtZW50OicsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFuYWx5emVCb3RDYXJkKFxuICBjYXJkQ29udGVudDogc3RyaW5nLFxuICB0ZW1wZXJhdHVyZTogbnVtYmVyID0gMC4xLCBcbiAgdG9wUDogbnVtYmVyID0gMC44XG4pOiBQcm9taXNlPEJvdENhcmRBbmFseXNpc1Jlc3VsdD4ge1xuICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICBjb25zdCBjYWNoZUtleSA9IGdlbmVyYXRlQ2FjaGVLZXkoY2FyZENvbnRlbnQsIEJPVF9DQVJEX1JFVklFV19QUk9NUFQpXG4gIGlmIChib3RDYXJkQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyBjYWNoZWQgYm90IGNhcmQgYW5hbHlzaXMgcmVzdWx0JylcbiAgICByZXR1cm4gYm90Q2FyZENhY2hlLmdldChjYWNoZUtleSkhXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdNYWtpbmcgbmV3IEFJIEFQSSBjYWxsIGZvciBib3QgY2FyZCBhbmFseXNpcy4uLicpXG4gICAgXG4gICAgLy8gQWRkIHJldHJ5IGxvZ2ljIGZvciBiZXR0ZXIgcmVsaWFiaWxpdHlcbiAgICBsZXQgcmVzcG9uc2VcbiAgICBsZXQgdGV4dFJlc3BvbnNlXG4gICAgbGV0IHJldHJ5Q291bnQgPSAwXG4gICAgY29uc3QgbWF4UmV0cmllcyA9IDNcbiAgICBcbiAgICB3aGlsZSAocmV0cnlDb3VudCA8IG1heFJldHJpZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICAgICAgbW9kZWw6ICdnZW1pbmktMi41LXBybycsXG4gICAgICAgICAgY29udGVudHM6IGAke0JPVF9DQVJEX1JFVklFV19QUk9NUFR9XFxcXG5cXFxcbkJvdCBDYXJkIENvbnRlbnQgdG8gYW5hbHl6ZTpcXFxcbiR7Y2FyZENvbnRlbnR9YCxcbiAgICAgICAgfSlcblxuICAgICAgICB0ZXh0UmVzcG9uc2UgPSByZXNwb25zZS50ZXh0XG4gICAgICAgIFxuICAgICAgICBpZiAodGV4dFJlc3BvbnNlICYmIHRleHRSZXNwb25zZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGJyZWFrIC8vIFN1Y2Nlc3MsIGV4aXQgcmV0cnkgbG9vcFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlIHJlY2VpdmVkJylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHJ5Q291bnQrK1xuICAgICAgICBjb25zb2xlLmxvZyhgQm90IGNhcmQgYW5hbHlzaXMgYXR0ZW1wdCAke3JldHJ5Q291bnR9IGZhaWxlZDpgLCBlcnJvcilcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXRyeUNvdW50ID49IG1heFJldHJpZXMpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeWluZyAoZXhwb25lbnRpYWwgYmFja29mZilcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiBNYXRoLnBvdygyLCByZXRyeUNvdW50IC0gMSkpKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRleHRSZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSB0ZXh0IHJlY2VpdmVkIGZyb20gQUkgbW9kZWwgYWZ0ZXIgcmV0cmllcycpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0FJIFJlc3BvbnNlIGxlbmd0aDonLCB0ZXh0UmVzcG9uc2UubGVuZ3RoKVxuICAgIGNvbnNvbGUubG9nKCdBSSBSZXNwb25zZSBwcmV2aWV3OicsIHRleHRSZXNwb25zZS5zdWJzdHJpbmcoMCwgMjAwKSlcblxuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQm90Q2FyZEpzb24odGV4dFJlc3BvbnNlKVxuICAgIFxuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICBib3RDYXJkQ2FjaGUuc2V0KGNhY2hlS2V5LCByZXN1bHQpXG4gICAgY29uc29sZS5sb2coJ0NhY2hlZCBib3QgY2FyZCBhbmFseXNpcyByZXN1bHQnKVxuICAgIFxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBhbmFseXplQm90Q2FyZDonLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59IFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVhbnRpZnlCb3RDYXJkKFxuICBvcmlnaW5hbENvbnRlbnQ6IHN0cmluZyxcbiAgYW5hbHlzaXNSZXN1bHQ6IEJvdENhcmRBbmFseXNpc1Jlc3VsdCxcbiAgdGVtcGVyYXR1cmU6IG51bWJlciA9IDAuMSwgXG4gIHRvcFA6IG51bWJlciA9IDAuOFxuKTogUHJvbWlzZTxCb3RDYXJkUXVhbnRpdGF0aXZlUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ01ha2luZyBuZXcgQUkgQVBJIGNhbGwgZm9yIGJvdCBjYXJkIHF1YW50aWZpY2F0aW9uLi4uJylcbiAgICBcbiAgICBjb25zdCBpbnB1dERhdGEgPSBg44CQ6KeS6Imy5Y2h5Y6f5aeL5pWw5o2u44CRXG4ke29yaWdpbmFsQ29udGVudH1cblxu44CQ5rex5bqm5YiG5p6Q5oql5ZGK44CRXG4ke0pTT04uc3RyaW5naWZ5KGFuYWx5c2lzUmVzdWx0LCBudWxsLCAyKX1gXG5cbiAgICAvLyBBZGQgcmV0cnkgbG9naWMgZm9yIGJldHRlciByZWxpYWJpbGl0eVxuICAgIGxldCByZXNwb25zZVxuICAgIGxldCB0ZXh0UmVzcG9uc2VcbiAgICBsZXQgcmV0cnlDb3VudCA9IDBcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gM1xuICAgIFxuICAgIHdoaWxlIChyZXRyeUNvdW50IDwgbWF4UmV0cmllcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgICAgICBtb2RlbDogJ2dlbWluaS0yLjUtcHJvJyxcbiAgICAgICAgICBjb250ZW50czogYCR7Qk9UX0NBUkRfUVVBTlRJVEFUSVZFX1BST01QVH1cXFxcblxcXFxuJHtpbnB1dERhdGF9YCxcbiAgICAgICAgfSlcblxuICAgICAgICB0ZXh0UmVzcG9uc2UgPSByZXNwb25zZS50ZXh0XG4gICAgICAgIFxuICAgICAgICBpZiAodGV4dFJlc3BvbnNlICYmIHRleHRSZXNwb25zZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGJyZWFrIC8vIFN1Y2Nlc3MsIGV4aXQgcmV0cnkgbG9vcFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlIHJlY2VpdmVkJylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHJ5Q291bnQrK1xuICAgICAgICBjb25zb2xlLmxvZyhgQm90IGNhcmQgcXVhbnRpZmljYXRpb24gYXR0ZW1wdCAke3JldHJ5Q291bnR9IGZhaWxlZDpgLCBlcnJvcilcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXRyeUNvdW50ID49IG1heFJldHJpZXMpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeWluZyAoZXhwb25lbnRpYWwgYmFja29mZilcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiBNYXRoLnBvdygyLCByZXRyeUNvdW50IC0gMSkpKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRleHRSZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSB0ZXh0IHJlY2VpdmVkIGZyb20gQUkgbW9kZWwgYWZ0ZXIgcmV0cmllcycpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0FJIFJlc3BvbnNlIGxlbmd0aDonLCB0ZXh0UmVzcG9uc2UubGVuZ3RoKVxuICAgIGNvbnNvbGUubG9nKCdBSSBSZXNwb25zZSBwcmV2aWV3OicsIHRleHRSZXNwb25zZS5zdWJzdHJpbmcoMCwgMjAwKSlcblxuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQm90Q2FyZFF1YW50aXRhdGl2ZUpzb24odGV4dFJlc3BvbnNlKVxuICAgIFxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBxdWFudGlmeUJvdENhcmQ6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufSAiXSwibmFtZXMiOlsiR29vZ2xlR2VuQUkiLCJhaSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQUlfQVBJX0tFWSIsImFuYWx5c2lzQ2FjaGUiLCJNYXAiLCJib3RDYXJkQ2FjaGUiLCJnZW5lcmF0ZUNhY2hlS2V5IiwidGV4dCIsInN5c3RlbVByb21wdCIsImNvbnRlbnQiLCJoYXNoIiwiaSIsImxlbmd0aCIsImNoYXIiLCJjaGFyQ29kZUF0IiwidG9TdHJpbmciLCJwYXJzZVJvYnVzdEpzb24iLCJ0ZXh0UmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwic3Vic3RyaW5nIiwianNvblRleHQiLCJ0cmltIiwicmVwbGFjZSIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiZG9jdW1lbnRfaWQiLCJEYXRlIiwibm93IiwiYW5hbHlzaXNfc3VtbWFyeSIsImNvbW1lbnRzIiwiY29tbWVudF9pZCIsImNvbnRleHRfYmVmb3JlIiwib3JpZ2luYWxfdGV4dCIsImNvbnRleHRfYWZ0ZXIiLCJzZXZlcml0eSIsImNvbW1lbnRfdGl0bGUiLCJjb21tZW50X2RldGFpbHMiLCJyZWNvbW1lbmRhdGlvbiIsIm1hcmtldF9zdGFuZGFyZCIsImlzX3N0YW5kYXJkIiwicmVhc29uaW5nIiwicGFyc2VCb3RDYXJkSnNvbiIsImNhcmRfaWQiLCJvdmVyYWxsX2Fzc2Vzc21lbnQiLCJ0YXJnZXRfYXVkaWVuY2VfZml0IiwiZGlzY292ZXJhYmlsaXR5X2FuZF9wYWNrYWdpbmciLCJuYXJyYXRpdmVfcG90ZW50aWFsX2FuZF9vcmlnaW5hbGl0eSIsImtleV9zdHJlbmd0aHNfc3VtbWFyeSIsImtleV93ZWFrbmVzc2VzX3N1bW1hcnkiLCJsb2NhdGFibGVfY29tbWVudHMiLCJzb3VyY2Vfc2VjdGlvbiIsImNvbW1lbnRfdHlwZSIsIkRFRkFVTFRfU1lTVEVNX1BST01QVCIsIkJPVF9DQVJEX1JFVklFV19QUk9NUFQiLCJwYXJzZUJvdENhcmRRdWFudGl0YXRpdmVKc29uIiwic2NvcmVzIiwicXVhbnRpdGF0aXZlX3Njb3JlcyIsInNlY3Rpb25zIiwiYWRqdXN0bWVudHMiLCJ0aXRsZV9hbmRfZGVzY3JpcHRpb24iLCJ0aXRsZSIsInNjb3JlIiwiZGVzY3JpcHRpb24iLCJjYWxjdWxhdGVkRmluYWxTY29yZSIsIndlbGNvbWVfbWVzc2FnZSIsImNoYXJhY3Rlcl93b3JsZF9idWlsZGluZyIsImhvb2tfYW5kX2F0dHJhY3Rpb24iLCJndWlkYW5jZSIsImJvdF9wcm9tcHQiLCJjaGFyYWN0ZXJfc3RvcnlfYXJjIiwic2V0dGluZ19jb25zaXN0ZW5jeSIsImxvbmdfdGVybV9wb3RlbnRpYWwiLCJpbnRlcmFjdGlvbl90ZXN0X3ByZWRpY3Rpb24iLCJjaGFyYWN0ZXJfc3RhYmlsaXR5IiwicGxvdF9kcml2aW5nX2ZvcmNlIiwiZW1vdGlvbmFsX3Jlc29uYW5jZSIsIm9yaWdpbmFsaXR5X2JvbnVzIiwidGVjaG5pY2FsX2RlZHVjdGlvbiIsImZpbmFsX3Njb3JlIiwiTWF0aCIsIm1heCIsIm1pbiIsImNvbW1lbnQiLCJCT1RfQ0FSRF9RVUFOVElUQVRJVkVfUFJPTVBUIiwiYW5hbHl6ZUxlZ2FsRG9jdW1lbnQiLCJ0ZW1wZXJhdHVyZSIsInRvcFAiLCJjYWNoZUtleSIsImhhcyIsImdldCIsInByb21wdCIsInJlc3BvbnNlIiwibW9kZWxzIiwiZ2VuZXJhdGVDb250ZW50IiwibW9kZWwiLCJjb250ZW50cyIsIkVycm9yIiwic2V0IiwiYW5hbHl6ZUJvdENhcmQiLCJjYXJkQ29udGVudCIsInJldHJ5Q291bnQiLCJtYXhSZXRyaWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicG93IiwicXVhbnRpZnlCb3RDYXJkIiwib3JpZ2luYWxDb250ZW50IiwiYW5hbHlzaXNSZXN1bHQiLCJpbnB1dERhdGEiLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai-service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/google-auth-library","vendor-chunks/uuid","vendor-chunks/ws","vendor-chunks/zod","vendor-chunks/gaxios","vendor-chunks/whatwg-url","vendor-chunks/jws","vendor-chunks/debug","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/tr46","vendor-chunks/https-proxy-agent","vendor-chunks/gcp-metadata","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/node-fetch","vendor-chunks/@google","vendor-chunks/webidl-conversions","vendor-chunks/supports-color","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/jwa","vendor-chunks/is-stream","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/extend","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquantify-bot-card%2Froute&page=%2Fapi%2Fquantify-bot-card%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquantify-bot-card%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();