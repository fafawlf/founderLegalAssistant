/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/pdf-parse/lib/pdf.js sync recursive ^\\.\\/.*\\/build\\/pdf\\.js$":
/*!**************************************************************************!*\
  !*** ./node_modules/pdf-parse/lib/pdf.js/ sync ^\.\/.*\/build\/pdf\.js$ ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./v1.10.100/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/pdf.js",
	"./v1.10.88/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.10.88/build/pdf.js",
	"./v1.9.426/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.9.426/build/pdf.js",
	"./v2.0.550/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v2.0.550/build/pdf.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "(rsc)/./node_modules/pdf-parse/lib/pdf.js sync recursive ^\\.\\/.*\\/build\\/pdf\\.js$";

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_lifanwang_Legal_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/upload/route.ts */ \"(rsc)/./app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/lifanwang/Legal/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_lifanwang_Legal_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxpZmFud2FuZyUyRkxlZ2FsJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmxpZmFud2FuZyUyRkxlZ2FsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNGO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbGVnYWwtcmV2aWV3LWFzc2lzdGFudC8/OTM3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbGlmYW53YW5nL0xlZ2FsL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VwbG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9saWZhbndhbmcvTGVnYWwvYXBwL2FwaS91cGxvYWQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/upload/route.ts":
/*!*********************************!*\
  !*** ./app/api/upload/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_file_processor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/file-processor */ \"(rsc)/./lib/file-processor.ts\");\n\n\nasync function POST(request) {\n    try {\n        console.log(\"Upload API called\");\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            console.log(\"No file provided\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No file provided\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"File details:\", {\n            name: file.name,\n            type: file.type,\n            size: file.size\n        });\n        const result = await (0,_lib_file_processor__WEBPACK_IMPORTED_MODULE_1__.processFile)(file);\n        console.log(\"Process file result:\", result);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: result.success,\n            data: result\n        });\n    } catch (error) {\n        console.error(\"Upload API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Failed to process file\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUQ7QUFDTDtBQUczQyxlQUFlRSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1DLFdBQVcsTUFBTUgsUUFBUUcsUUFBUTtRQUN2QyxNQUFNQyxPQUFPRCxTQUFTRSxHQUFHLENBQUM7UUFFMUIsSUFBSSxDQUFDRCxNQUFNO1lBQ1RILFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUQyxPQUFPO1lBQ1QsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25CO1FBRUFSLFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUI7WUFDM0JRLE1BQU1OLEtBQUtNLElBQUk7WUFDZkMsTUFBTVAsS0FBS08sSUFBSTtZQUNmQyxNQUFNUixLQUFLUSxJQUFJO1FBQ2pCO1FBRUEsTUFBTUMsU0FBUyxNQUFNZixnRUFBV0EsQ0FBQ007UUFDakNILFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0JXO1FBRXBDLE9BQU9oQixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTTSxPQUFPTixPQUFPO1lBQ3ZCTyxNQUFNRDtRQUNSO0lBQ0YsRUFBRSxPQUFPTCxPQUFPO1FBQ2RQLFFBQVFPLEtBQUssQ0FBQyxxQkFBcUJBO1FBRW5DLE9BQU9YLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEMsT0FBT0EsaUJBQWlCTyxRQUFRUCxNQUFNUSxPQUFPLEdBQUc7UUFDbEQsR0FBRztZQUFFUCxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWxlZ2FsLXJldmlldy1hc3Npc3RhbnQvLi9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cz9hODhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByb2Nlc3NGaWxlIH0gZnJvbSAnQC9saWIvZmlsZS1wcm9jZXNzb3InXG5pbXBvcnQgdHlwZSB7IEFjdGlvblJlc3BvbnNlLCBGaWxlVXBsb2FkUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8TmV4dFJlc3BvbnNlPEFjdGlvblJlc3BvbnNlPEZpbGVVcGxvYWRSZXNwb25zZT4+PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1VwbG9hZCBBUEkgY2FsbGVkJylcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKSBhcyBGaWxlXG4gICAgXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gZmlsZSBwcm92aWRlZCcpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdObyBmaWxlIHByb3ZpZGVkJ1xuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnRmlsZSBkZXRhaWxzOicsIHtcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZVxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2Vzc0ZpbGUoZmlsZSlcbiAgICBjb25zb2xlLmxvZygnUHJvY2VzcyBmaWxlIHJlc3VsdDonLCByZXN1bHQpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgZGF0YTogcmVzdWx0XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgQVBJIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcHJvY2VzcyBmaWxlJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJvY2Vzc0ZpbGUiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtRGF0YSIsImZpbGUiLCJnZXQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwibmFtZSIsInR5cGUiLCJzaXplIiwicmVzdWx0IiwiZGF0YSIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/file-processor.ts":
/*!*******************************!*\
  !*** ./lib/file-processor.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findTextPosition: () => (/* binding */ findTextPosition),\n/* harmony export */   preprocessText: () => (/* binding */ preprocessText),\n/* harmony export */   processFile: () => (/* binding */ processFile)\n/* harmony export */ });\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdf-parse */ \"(rsc)/./node_modules/pdf-parse/index.js\");\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pdf_parse__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mammoth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mammoth */ \"(rsc)/./node_modules/mammoth/lib/index.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jszip */ \"(rsc)/./node_modules/jszip/lib/index.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function processFile(file) {\n    try {\n        if (!file) {\n            return {\n                success: false,\n                error: \"No file provided\"\n            };\n        }\n        const fileType = file.type;\n        console.log(\"Processing file type:\", fileType);\n        let text = \"\";\n        let wordComments = [];\n        if (fileType === \"application/pdf\") {\n            console.log(\"Processing as PDF\");\n            text = await processPDF(file);\n        } else if (fileType === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" || fileType === \"application/msword\") {\n            console.log(\"Processing as Word document\");\n            const result = await processDOCX(file);\n            text = result.text;\n            wordComments = result.wordComments;\n        } else {\n            return {\n                success: false,\n                error: \"Unsupported file type. Please upload a PDF or Word document.\"\n            };\n        }\n        if (!text.trim()) {\n            return {\n                success: false,\n                error: \"No text content found in the file\"\n            };\n        }\n        console.log(\"File processed successfully, text length:\", text.length);\n        console.log(\"Word comments found:\", wordComments.length);\n        console.log(\"Word comments:\", wordComments);\n        return {\n            success: true,\n            text,\n            wordComments: wordComments.length > 0 ? wordComments : undefined\n        };\n    } catch (error) {\n        console.error(\"Error processing file:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error occurred\"\n        };\n    }\n}\nasync function processPDF(file) {\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    const data = await pdf_parse__WEBPACK_IMPORTED_MODULE_0___default()(buffer);\n    return data.text;\n}\nasync function processDOCX(file) {\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    try {\n        // Convert to HTML to get the main text with better formatting preservation\n        const htmlResult = await mammoth__WEBPACK_IMPORTED_MODULE_1__.convertToHtml({\n            buffer\n        });\n        // Convert HTML to text while preserving line breaks\n        let text = htmlResult.value.replace(/<p[^>]*>/g, \"\\n\") // Convert paragraph tags to line breaks\n        .replace(/<\\/p>/g, \"\\n\") // End paragraphs with line breaks\n        .replace(/<br[^>]*>/g, \"\\n\") // Convert br tags to line breaks\n        .replace(/<[^>]*>/g, \"\") // Remove remaining HTML tags\n        .replace(/&nbsp;/g, \" \") // Convert non-breaking spaces\n        .replace(/&amp;/g, \"&\") // Convert HTML entities\n        .replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&quot;/g, '\"').replace(/&#39;/g, \"'\").replace(/\\n{3,}/g, \"\\n\\n\") // Normalize multiple line breaks to max 2\n        .trim();\n        console.log(\"Extracted text length:\", text.length);\n        console.log(\"Text preview with line breaks:\", text.substring(0, 500));\n        // Try to extract comments from the buffer directly using comprehensive methods\n        const wordComments = await extractWordCommentsComprehensive(arrayBuffer);\n        return {\n            text,\n            wordComments\n        };\n    } catch (error) {\n        console.error(\"Error processing DOCX:\", error);\n        return {\n            text: \"\",\n            wordComments: []\n        };\n    }\n}\nasync function extractWordCommentsComprehensive(buffer) {\n    const comments = [];\n    try {\n        // Try to use JSZip to properly extract and parse the Word document structure\n        const zip = await jszip__WEBPACK_IMPORTED_MODULE_2___default().loadAsync(buffer);\n        console.log(\"Looking for Word document comment files...\");\n        // Check if comments.xml exists in the Word document\n        const commentsFile = zip.file(\"word/comments.xml\");\n        if (commentsFile) {\n            console.log(\"Found word/comments.xml, extracting structured comments...\");\n            const commentsXml = await commentsFile.async(\"string\");\n            console.log(\"Comments XML preview:\", commentsXml.substring(0, 500));\n            // Parse the XML properly\n            const commentMatches = commentsXml.match(/<w:comment[^>]*>[\\s\\S]*?<\\/w:comment>/g);\n            if (commentMatches) {\n                commentMatches.forEach((commentXml, index)=>{\n                    try {\n                        // Extract author\n                        const authorMatch = commentXml.match(/w:author=\"([^\"]*)\"/);\n                        const author = authorMatch ? authorMatch[1] : `Commenter ${index + 1}`;\n                        // Extract date\n                        const dateMatch = commentXml.match(/w:date=\"([^\"]*)\"/);\n                        const date = dateMatch ? dateMatch[1] : new Date().toISOString();\n                        // Extract initials as fallback author\n                        const initialsMatch = commentXml.match(/w:initials=\"([^\"]*)\"/);\n                        const finalAuthor = author || (initialsMatch ? initialsMatch[1] : `Commenter ${index + 1}`);\n                        // Extract text content properly\n                        const textElements = commentXml.match(/<w:t[^>]*>([^<]*)<\\/w:t>/g);\n                        let commentText = \"\";\n                        if (textElements) {\n                            commentText = textElements.map((element)=>{\n                                const textMatch = element.match(/<w:t[^>]*>([^<]*)<\\/w:t>/);\n                                return textMatch ? textMatch[1] : \"\";\n                            }).filter((text)=>text.trim().length > 0).join(\" \").trim();\n                        }\n                        if (commentText && commentText.length > 0 && !commentText.includes(\"\")) {\n                            console.log(`Extracted clean comment by ${finalAuthor}: ${commentText.substring(0, 100)}...`);\n                            comments.push({\n                                id: `word-comment-${comments.length + 1}`,\n                                text: cleanCommentText(commentText),\n                                author: finalAuthor,\n                                date: formatDate(date),\n                                position: {\n                                    start: 0,\n                                    end: 0\n                                },\n                                type: \"word-comment\"\n                            });\n                        }\n                    } catch (parseError) {\n                        console.error(\"Error parsing individual comment:\", parseError);\n                    }\n                });\n            }\n        }\n        // If no comments found in comments.xml, try alternative approach with document.xml\n        if (comments.length === 0) {\n            console.log(\"No comments in comments.xml, trying document.xml approach...\");\n            const documentFile = zip.file(\"word/document.xml\");\n            if (documentFile) {\n                const documentXml = await documentFile.async(\"string\");\n                // Look for comment reference ranges in the document\n                const commentRefs = documentXml.match(/<w:commentRangeStart[^>]*w:id=\"([^\"]*)\"[^>]*>/g);\n                if (commentRefs && commentsFile) {\n                    const commentsXml = await commentsFile.async(\"string\");\n                    commentRefs.forEach((ref, index)=>{\n                        const idMatch = ref.match(/w:id=\"([^\"]*)\"/);\n                        if (idMatch) {\n                            const commentId = idMatch[1];\n                            // Find the corresponding comment in comments.xml\n                            const commentPattern = new RegExp(`<w:comment[^>]*w:id=\"${commentId}\"[^>]*>([\\\\s\\\\S]*?)<\\\\/w:comment>`, \"g\");\n                            const commentMatch = commentPattern.exec(commentsXml);\n                            if (commentMatch) {\n                                const commentContent = commentMatch[0];\n                                const authorMatch = commentContent.match(/w:author=\"([^\"]*)\"/);\n                                const dateMatch = commentContent.match(/w:date=\"([^\"]*)\"/);\n                                const author = authorMatch ? authorMatch[1] : `Commenter ${index + 1}`;\n                                const date = dateMatch ? dateMatch[1] : new Date().toISOString();\n                                // Extract clean text\n                                const textElements = commentMatch[1].match(/<w:t[^>]*>([^<]*)<\\/w:t>/g);\n                                let commentText = \"\";\n                                if (textElements) {\n                                    commentText = textElements.map((element)=>{\n                                        const textMatch = element.match(/<w:t[^>]*>([^<]*)<\\/w:t>/);\n                                        return textMatch ? textMatch[1] : \"\";\n                                    }).filter((text)=>text.trim().length > 0).join(\" \").trim();\n                                }\n                                if (commentText && commentText.length > 0 && !commentText.includes(\"\")) {\n                                    console.log(`Extracted referenced comment by ${author}: ${commentText.substring(0, 100)}...`);\n                                    comments.push({\n                                        id: `word-comment-${comments.length + 1}`,\n                                        text: cleanCommentText(commentText),\n                                        author: author,\n                                        date: formatDate(date),\n                                        position: {\n                                            start: 0,\n                                            end: 0\n                                        },\n                                        type: \"word-comment\"\n                                    });\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        }\n        // If still no comments found, try mammoth's comment extraction as fallback\n        if (comments.length === 0) {\n            console.log(\"No comments found in XML files, trying mammoth extraction...\");\n            try {\n                const mammothBuffer = Buffer.from(buffer);\n                const result = await mammoth__WEBPACK_IMPORTED_MODULE_1__.convertToHtml({\n                    buffer: mammothBuffer\n                });\n                // Look for any comment-like patterns in the converted text\n                const htmlText = result.value;\n                if (htmlText.includes(\"comment\") || htmlText.includes(\"Comment\")) {\n                    console.log(\"Found potential comments in mammoth output, but extraction method needs improvement\");\n                // For now, we'll rely on the XML-based extraction above\n                }\n            } catch (mammothError) {\n                console.error(\"Mammoth fallback failed:\", mammothError);\n            }\n        }\n        if (comments.length > 0) {\n            console.log(`Successfully extracted ${comments.length} clean Word comments:`);\n            comments.forEach((comment, idx)=>{\n                console.log(`  ${idx + 1}. Author: ${comment.author}, Text: ${comment.text.substring(0, 100)}...`);\n            });\n        } else {\n            console.log(\"No readable Word comments found\");\n        }\n        return comments.slice(0, 10) // Limit to first 10 comments\n        ;\n    } catch (error) {\n        console.error(\"Error extracting Word comments:\", error);\n        // Final fallback: try the old method but with better text cleaning\n        try {\n            const uint8Array = new Uint8Array(buffer);\n            const decoder = new TextDecoder(\"utf-8\", {\n                fatal: false\n            });\n            const content = decoder.decode(uint8Array);\n            // Look for readable text patterns that might be comments\n            const readablePatterns = [\n                /(?:Lifan\\s+Wang|Wang,?\\s+Lifan|Coronado,?\\s+Andre|Andre\\s+Coronado)[\\s:]+([A-Za-z\\s,.\\-!?]{10,200})/gi,\n                /Comment[\\s:]+([A-Za-z\\s,.\\-!?]{10,200})/gi\n            ];\n            for (const pattern of readablePatterns){\n                let match;\n                while((match = pattern.exec(content)) !== null && comments.length < 5){\n                    const text = match[1]?.trim();\n                    if (text && !text.includes(\"\") && text.length > 10) {\n                        comments.push({\n                            id: `word-comment-${comments.length + 1}`,\n                            text: cleanCommentText(text),\n                            author: match[0].includes(\"Lifan\") ? \"Lifan Wang\" : match[0].includes(\"Coronado\") ? \"Coronado, Andre\" : \"Unknown Author\",\n                            date: new Date().toISOString(),\n                            position: {\n                                start: 0,\n                                end: 0\n                            },\n                            type: \"word-comment\"\n                        });\n                    }\n                }\n            }\n        } catch (fallbackError) {\n            console.error(\"Fallback extraction also failed:\", fallbackError);\n        }\n        return comments;\n    }\n}\nfunction cleanCommentText(text) {\n    return text.replace(/<[^>]*>/g, \"\") // Remove HTML/XML tags\n    .replace(/&[a-z]+;/gi, \"\") // Remove HTML entities\n    .replace(/\\s+/g, \" \") // Normalize whitespace\n    .replace(/[^\\x20-\\x7E\\u00A0-\\uFFFF]/g, \"\") // Remove control characters but keep unicode\n    .trim();\n}\nfunction formatDate(dateStr) {\n    try {\n        // Try to parse various date formats\n        const date = new Date(dateStr);\n        if (isNaN(date.getTime())) {\n            return new Date().toISOString();\n        }\n        return date.toISOString();\n    } catch  {\n        return new Date().toISOString();\n    }\n}\nfunction preprocessText(text) {\n    return text.replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").replace(/\\n{3,}/g, \"\\n\\n\").trim();\n}\nfunction findTextPosition(fullText, searchText) {\n    const startIndex = fullText.indexOf(searchText);\n    if (startIndex === -1) {\n        return null;\n    }\n    return {\n        start: startIndex,\n        end: startIndex + searchText.length\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQkMsUUFBZ0IsRUFBRUMsVUFBa0I7SUFDbkUsTUFBTUMsYUFBYUYsU0FBU0csT0FBTyxDQUFDRjtJQUNwQyxJQUFJQyxlQUFlLENBQUMsR0FBRztRQUNyQixPQUFPO0lBQ1Q7SUFFQSxPQUFPO1FBQ0xyQyxPQUFPcUM7UUFDUHBDLEtBQUtvQyxhQUFhRCxXQUFXbkYsTUFBTTtJQUNyQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbGVnYWwtcmV2aWV3LWFzc2lzdGFudC8uL2xpYi9maWxlLXByb2Nlc3Nvci50cz9jNmRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwZGYgZnJvbSAncGRmLXBhcnNlJ1xuaW1wb3J0IG1hbW1vdGggZnJvbSAnbWFtbW90aCdcbmltcG9ydCBKU1ppcCBmcm9tICdqc3ppcCdcbmltcG9ydCB0eXBlIHsgRmlsZVVwbG9hZFJlc3BvbnNlLCBXb3JkQ29tbWVudCB9IGZyb20gJ0AvdHlwZXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRmlsZShmaWxlOiBGaWxlKTogUHJvbWlzZTxGaWxlVXBsb2FkUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGZpbGUgcHJvdmlkZWQnIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaWxlVHlwZSA9IGZpbGUudHlwZVxuICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIGZpbGUgdHlwZTonLCBmaWxlVHlwZSlcbiAgICBsZXQgdGV4dCA9ICcnXG4gICAgbGV0IHdvcmRDb21tZW50czogV29yZENvbW1lbnRbXSA9IFtdXG5cbiAgICBpZiAoZmlsZVR5cGUgPT09ICdhcHBsaWNhdGlvbi9wZGYnKSB7XG4gICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBhcyBQREYnKVxuICAgICAgdGV4dCA9IGF3YWl0IHByb2Nlc3NQREYoZmlsZSlcbiAgICB9IGVsc2UgaWYgKGZpbGVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnIHx8IFxuICAgICAgICAgICAgICAgZmlsZVR5cGUgPT09ICdhcHBsaWNhdGlvbi9tc3dvcmQnKSB7XG4gICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBhcyBXb3JkIGRvY3VtZW50JylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3NET0NYKGZpbGUpXG4gICAgICB0ZXh0ID0gcmVzdWx0LnRleHRcbiAgICAgIHdvcmRDb21tZW50cyA9IHJlc3VsdC53b3JkQ29tbWVudHNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5zdXBwb3J0ZWQgZmlsZSB0eXBlLiBQbGVhc2UgdXBsb2FkIGEgUERGIG9yIFdvcmQgZG9jdW1lbnQuJyB9XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gdGV4dCBjb250ZW50IGZvdW5kIGluIHRoZSBmaWxlJyB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0ZpbGUgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseSwgdGV4dCBsZW5ndGg6JywgdGV4dC5sZW5ndGgpXG4gICAgY29uc29sZS5sb2coJ1dvcmQgY29tbWVudHMgZm91bmQ6Jywgd29yZENvbW1lbnRzLmxlbmd0aClcbiAgICBjb25zb2xlLmxvZygnV29yZCBjb21tZW50czonLCB3b3JkQ29tbWVudHMpXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRleHQsXG4gICAgICB3b3JkQ29tbWVudHM6IHdvcmRDb21tZW50cy5sZW5ndGggPiAwID8gd29yZENvbW1lbnRzIDogdW5kZWZpbmVkXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgZmlsZTonLCBlcnJvcilcbiAgICByZXR1cm4geyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyBcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1BERihmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKClcbiAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYXJyYXlCdWZmZXIpXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBwZGYoYnVmZmVyKVxuICByZXR1cm4gZGF0YS50ZXh0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NET0NYKGZpbGU6IEZpbGUpOiBQcm9taXNlPHsgdGV4dDogc3RyaW5nOyB3b3JkQ29tbWVudHM6IFdvcmRDb21tZW50W10gfT4ge1xuICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKVxuICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcilcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCB0byBIVE1MIHRvIGdldCB0aGUgbWFpbiB0ZXh0IHdpdGggYmV0dGVyIGZvcm1hdHRpbmcgcHJlc2VydmF0aW9uXG4gICAgY29uc3QgaHRtbFJlc3VsdCA9IGF3YWl0IG1hbW1vdGguY29udmVydFRvSHRtbCh7IFxuICAgICAgYnVmZmVyXG4gICAgfSlcbiAgICBcbiAgICAvLyBDb252ZXJ0IEhUTUwgdG8gdGV4dCB3aGlsZSBwcmVzZXJ2aW5nIGxpbmUgYnJlYWtzXG4gICAgbGV0IHRleHQgPSBodG1sUmVzdWx0LnZhbHVlXG4gICAgICAucmVwbGFjZSgvPHBbXj5dKj4vZywgJ1xcbicpIC8vIENvbnZlcnQgcGFyYWdyYXBoIHRhZ3MgdG8gbGluZSBicmVha3NcbiAgICAgIC5yZXBsYWNlKC88XFwvcD4vZywgJ1xcbicpIC8vIEVuZCBwYXJhZ3JhcGhzIHdpdGggbGluZSBicmVha3NcbiAgICAgIC5yZXBsYWNlKC88YnJbXj5dKj4vZywgJ1xcbicpIC8vIENvbnZlcnQgYnIgdGFncyB0byBsaW5lIGJyZWFrc1xuICAgICAgLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSByZW1haW5pbmcgSFRNTCB0YWdzXG4gICAgICAucmVwbGFjZSgvJm5ic3A7L2csICcgJykgLy8gQ29udmVydCBub24tYnJlYWtpbmcgc3BhY2VzXG4gICAgICAucmVwbGFjZSgvJmFtcDsvZywgJyYnKSAvLyBDb252ZXJ0IEhUTUwgZW50aXRpZXNcbiAgICAgIC5yZXBsYWNlKC8mbHQ7L2csICc8JylcbiAgICAgIC5yZXBsYWNlKC8mZ3Q7L2csICc+JylcbiAgICAgIC5yZXBsYWNlKC8mcXVvdDsvZywgJ1wiJylcbiAgICAgIC5yZXBsYWNlKC8mIzM5Oy9nLCBcIidcIilcbiAgICAgIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAvLyBOb3JtYWxpemUgbXVsdGlwbGUgbGluZSBicmVha3MgdG8gbWF4IDJcbiAgICAgIC50cmltKClcbiAgICBcbiAgICBjb25zb2xlLmxvZygnRXh0cmFjdGVkIHRleHQgbGVuZ3RoOicsIHRleHQubGVuZ3RoKVxuICAgIGNvbnNvbGUubG9nKCdUZXh0IHByZXZpZXcgd2l0aCBsaW5lIGJyZWFrczonLCB0ZXh0LnN1YnN0cmluZygwLCA1MDApKVxuICAgIFxuICAgIC8vIFRyeSB0byBleHRyYWN0IGNvbW1lbnRzIGZyb20gdGhlIGJ1ZmZlciBkaXJlY3RseSB1c2luZyBjb21wcmVoZW5zaXZlIG1ldGhvZHNcbiAgICBjb25zdCB3b3JkQ29tbWVudHMgPSBhd2FpdCBleHRyYWN0V29yZENvbW1lbnRzQ29tcHJlaGVuc2l2ZShhcnJheUJ1ZmZlcilcbiAgICBcbiAgICByZXR1cm4geyB0ZXh0LCB3b3JkQ29tbWVudHMgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgRE9DWDonLCBlcnJvcilcbiAgICByZXR1cm4geyB0ZXh0OiAnJywgd29yZENvbW1lbnRzOiBbXSB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFdvcmRDb21tZW50c0NvbXByZWhlbnNpdmUoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IFByb21pc2U8V29yZENvbW1lbnRbXT4ge1xuICBjb25zdCBjb21tZW50czogV29yZENvbW1lbnRbXSA9IFtdXG4gIFxuICB0cnkge1xuICAgIC8vIFRyeSB0byB1c2UgSlNaaXAgdG8gcHJvcGVybHkgZXh0cmFjdCBhbmQgcGFyc2UgdGhlIFdvcmQgZG9jdW1lbnQgc3RydWN0dXJlXG4gICAgY29uc3QgemlwID0gYXdhaXQgSlNaaXAubG9hZEFzeW5jKGJ1ZmZlcilcbiAgICBcbiAgICBjb25zb2xlLmxvZygnTG9va2luZyBmb3IgV29yZCBkb2N1bWVudCBjb21tZW50IGZpbGVzLi4uJylcbiAgICBcbiAgICAvLyBDaGVjayBpZiBjb21tZW50cy54bWwgZXhpc3RzIGluIHRoZSBXb3JkIGRvY3VtZW50XG4gICAgY29uc3QgY29tbWVudHNGaWxlID0gemlwLmZpbGUoJ3dvcmQvY29tbWVudHMueG1sJylcbiAgICBpZiAoY29tbWVudHNGaWxlKSB7XG4gICAgICBjb25zb2xlLmxvZygnRm91bmQgd29yZC9jb21tZW50cy54bWwsIGV4dHJhY3Rpbmcgc3RydWN0dXJlZCBjb21tZW50cy4uLicpXG4gICAgICBjb25zdCBjb21tZW50c1htbCA9IGF3YWl0IGNvbW1lbnRzRmlsZS5hc3luYygnc3RyaW5nJylcbiAgICAgIGNvbnNvbGUubG9nKCdDb21tZW50cyBYTUwgcHJldmlldzonLCBjb21tZW50c1htbC5zdWJzdHJpbmcoMCwgNTAwKSlcbiAgICAgIFxuICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBYTUwgcHJvcGVybHlcbiAgICAgICBjb25zdCBjb21tZW50TWF0Y2hlcyA9IGNvbW1lbnRzWG1sLm1hdGNoKC88dzpjb21tZW50W14+XSo+W1xcc1xcU10qPzxcXC93OmNvbW1lbnQ+L2cpXG4gICAgICAgaWYgKGNvbW1lbnRNYXRjaGVzKSB7XG4gICAgICAgICBjb21tZW50TWF0Y2hlcy5mb3JFYWNoKChjb21tZW50WG1sOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRXh0cmFjdCBhdXRob3JcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvck1hdGNoID0gY29tbWVudFhtbC5tYXRjaCgvdzphdXRob3I9XCIoW15cIl0qKVwiLylcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvciA9IGF1dGhvck1hdGNoID8gYXV0aG9yTWF0Y2hbMV0gOiBgQ29tbWVudGVyICR7aW5kZXggKyAxfWBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFjdCBkYXRlXG4gICAgICAgICAgICBjb25zdCBkYXRlTWF0Y2ggPSBjb21tZW50WG1sLm1hdGNoKC93OmRhdGU9XCIoW15cIl0qKVwiLylcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkYXRlTWF0Y2ggPyBkYXRlTWF0Y2hbMV0gOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFjdCBpbml0aWFscyBhcyBmYWxsYmFjayBhdXRob3JcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxzTWF0Y2ggPSBjb21tZW50WG1sLm1hdGNoKC93OmluaXRpYWxzPVwiKFteXCJdKilcIi8pXG4gICAgICAgICAgICBjb25zdCBmaW5hbEF1dGhvciA9IGF1dGhvciB8fCAoaW5pdGlhbHNNYXRjaCA/IGluaXRpYWxzTWF0Y2hbMV0gOiBgQ29tbWVudGVyICR7aW5kZXggKyAxfWApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGV4dCBjb250ZW50IHByb3Blcmx5XG4gICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudHMgPSBjb21tZW50WG1sLm1hdGNoKC88dzp0W14+XSo+KFtePF0qKTxcXC93OnQ+L2cpXG4gICAgICAgICAgICBsZXQgY29tbWVudFRleHQgPSAnJ1xuICAgICAgICAgICAgaWYgKHRleHRFbGVtZW50cykge1xuICAgICAgICAgICAgICBjb21tZW50VGV4dCA9IHRleHRFbGVtZW50c1xuICAgICAgICAgICAgICAgIC5tYXAoKGVsZW1lbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dE1hdGNoID0gZWxlbWVudC5tYXRjaCgvPHc6dFtePl0qPihbXjxdKik8XFwvdzp0Pi8pXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dE1hdGNoID8gdGV4dE1hdGNoWzFdIDogJydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHRleHQ6IHN0cmluZykgPT4gdGV4dC50cmltKCkubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAuam9pbignICcpXG4gICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY29tbWVudFRleHQgJiYgY29tbWVudFRleHQubGVuZ3RoID4gMCAmJiAhY29tbWVudFRleHQuaW5jbHVkZXMoJycpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFeHRyYWN0ZWQgY2xlYW4gY29tbWVudCBieSAke2ZpbmFsQXV0aG9yfTogJHtjb21tZW50VGV4dC5zdWJzdHJpbmcoMCwgMTAwKX0uLi5gKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29tbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IGB3b3JkLWNvbW1lbnQtJHtjb21tZW50cy5sZW5ndGggKyAxfWAsXG4gICAgICAgICAgICAgICAgdGV4dDogY2xlYW5Db21tZW50VGV4dChjb21tZW50VGV4dCksXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBmaW5hbEF1dGhvcixcbiAgICAgICAgICAgICAgICBkYXRlOiBmb3JtYXREYXRlKGRhdGUpLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHN0YXJ0OiAwLCBlbmQ6IDAgfSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnd29yZC1jb21tZW50J1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgaW5kaXZpZHVhbCBjb21tZW50OicsIHBhcnNlRXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBjb21tZW50cyBmb3VuZCBpbiBjb21tZW50cy54bWwsIHRyeSBhbHRlcm5hdGl2ZSBhcHByb2FjaCB3aXRoIGRvY3VtZW50LnhtbFxuICAgIGlmIChjb21tZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBjb21tZW50cyBpbiBjb21tZW50cy54bWwsIHRyeWluZyBkb2N1bWVudC54bWwgYXBwcm9hY2guLi4nKVxuICAgICAgXG4gICAgICBjb25zdCBkb2N1bWVudEZpbGUgPSB6aXAuZmlsZSgnd29yZC9kb2N1bWVudC54bWwnKVxuICAgICAgaWYgKGRvY3VtZW50RmlsZSkge1xuICAgICAgICBjb25zdCBkb2N1bWVudFhtbCA9IGF3YWl0IGRvY3VtZW50RmlsZS5hc3luYygnc3RyaW5nJylcbiAgICAgICAgXG4gICAgICAgIC8vIExvb2sgZm9yIGNvbW1lbnQgcmVmZXJlbmNlIHJhbmdlcyBpbiB0aGUgZG9jdW1lbnRcbiAgICAgICAgY29uc3QgY29tbWVudFJlZnMgPSBkb2N1bWVudFhtbC5tYXRjaCgvPHc6Y29tbWVudFJhbmdlU3RhcnRbXj5dKnc6aWQ9XCIoW15cIl0qKVwiW14+XSo+L2cpXG4gICAgICAgIGlmIChjb21tZW50UmVmcyAmJiBjb21tZW50c0ZpbGUpIHtcbiAgICAgICAgICBjb25zdCBjb21tZW50c1htbCA9IGF3YWl0IGNvbW1lbnRzRmlsZS5hc3luYygnc3RyaW5nJylcbiAgICAgICAgICBcbiAgICAgICAgICBjb21tZW50UmVmcy5mb3JFYWNoKChyZWY6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWRNYXRjaCA9IHJlZi5tYXRjaCgvdzppZD1cIihbXlwiXSopXCIvKVxuICAgICAgICAgICAgaWYgKGlkTWF0Y2gpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29tbWVudElkID0gaWRNYXRjaFsxXVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29ycmVzcG9uZGluZyBjb21tZW50IGluIGNvbW1lbnRzLnhtbFxuICAgICAgICAgICAgICBjb25zdCBjb21tZW50UGF0dGVybiA9IG5ldyBSZWdFeHAoYDx3OmNvbW1lbnRbXj5dKnc6aWQ9XCIke2NvbW1lbnRJZH1cIltePl0qPihbXFxcXHNcXFxcU10qPyk8XFxcXC93OmNvbW1lbnQ+YCwgJ2cnKVxuICAgICAgICAgICAgICBjb25zdCBjb21tZW50TWF0Y2ggPSBjb21tZW50UGF0dGVybi5leGVjKGNvbW1lbnRzWG1sKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGNvbW1lbnRNYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRDb250ZW50ID0gY29tbWVudE1hdGNoWzBdXG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yTWF0Y2ggPSBjb21tZW50Q29udGVudC5tYXRjaCgvdzphdXRob3I9XCIoW15cIl0qKVwiLylcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlTWF0Y2ggPSBjb21tZW50Q29udGVudC5tYXRjaCgvdzpkYXRlPVwiKFteXCJdKilcIi8pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yID0gYXV0aG9yTWF0Y2ggPyBhdXRob3JNYXRjaFsxXSA6IGBDb21tZW50ZXIgJHtpbmRleCArIDF9YFxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkYXRlTWF0Y2ggPyBkYXRlTWF0Y2hbMV0gOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGNsZWFuIHRleHRcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudHMgPSBjb21tZW50TWF0Y2hbMV0ubWF0Y2goLzx3OnRbXj5dKj4oW148XSopPFxcL3c6dD4vZylcbiAgICAgICAgICAgICAgICBsZXQgY29tbWVudFRleHQgPSAnJ1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0RWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbW1lbnRUZXh0ID0gdGV4dEVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKGVsZW1lbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNYXRjaCA9IGVsZW1lbnQubWF0Y2goLzx3OnRbXj5dKj4oW148XSopPFxcL3c6dD4vKVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0TWF0Y2ggPyB0ZXh0TWF0Y2hbMV0gOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCh0ZXh0OiBzdHJpbmcpID0+IHRleHQudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJylcbiAgICAgICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudFRleHQgJiYgY29tbWVudFRleHQubGVuZ3RoID4gMCAmJiAhY29tbWVudFRleHQuaW5jbHVkZXMoJycpKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXh0cmFjdGVkIHJlZmVyZW5jZWQgY29tbWVudCBieSAke2F1dGhvcn06ICR7Y29tbWVudFRleHQuc3Vic3RyaW5nKDAsIDEwMCl9Li4uYClcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29tbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgd29yZC1jb21tZW50LSR7Y29tbWVudHMubGVuZ3RoICsgMX1gLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjbGVhbkNvbW1lbnRUZXh0KGNvbW1lbnRUZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBhdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGZvcm1hdERhdGUoZGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHN0YXJ0OiAwLCBlbmQ6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dvcmQtY29tbWVudCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBzdGlsbCBubyBjb21tZW50cyBmb3VuZCwgdHJ5IG1hbW1vdGgncyBjb21tZW50IGV4dHJhY3Rpb24gYXMgZmFsbGJhY2tcbiAgICBpZiAoY29tbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY29tbWVudHMgZm91bmQgaW4gWE1MIGZpbGVzLCB0cnlpbmcgbWFtbW90aCBleHRyYWN0aW9uLi4uJylcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1hbW1vdGhCdWZmZXIgPSBCdWZmZXIuZnJvbShidWZmZXIpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hbW1vdGguY29udmVydFRvSHRtbCh7IGJ1ZmZlcjogbWFtbW90aEJ1ZmZlciB9KVxuICAgICAgICBcbiAgICAgICAgLy8gTG9vayBmb3IgYW55IGNvbW1lbnQtbGlrZSBwYXR0ZXJucyBpbiB0aGUgY29udmVydGVkIHRleHRcbiAgICAgICAgY29uc3QgaHRtbFRleHQgPSByZXN1bHQudmFsdWVcbiAgICAgICAgaWYgKGh0bWxUZXh0LmluY2x1ZGVzKCdjb21tZW50JykgfHwgaHRtbFRleHQuaW5jbHVkZXMoJ0NvbW1lbnQnKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBwb3RlbnRpYWwgY29tbWVudHMgaW4gbWFtbW90aCBvdXRwdXQsIGJ1dCBleHRyYWN0aW9uIG1ldGhvZCBuZWVkcyBpbXByb3ZlbWVudCcpXG4gICAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwgcmVseSBvbiB0aGUgWE1MLWJhc2VkIGV4dHJhY3Rpb24gYWJvdmVcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAobWFtbW90aEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hbW1vdGggZmFsbGJhY2sgZmFpbGVkOicsIG1hbW1vdGhFcnJvcilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgZXh0cmFjdGVkICR7Y29tbWVudHMubGVuZ3RofSBjbGVhbiBXb3JkIGNvbW1lbnRzOmApXG4gICAgICBjb21tZW50cy5mb3JFYWNoKChjb21tZW50LCBpZHgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYCAgJHtpZHggKyAxfS4gQXV0aG9yOiAke2NvbW1lbnQuYXV0aG9yfSwgVGV4dDogJHtjb21tZW50LnRleHQuc3Vic3RyaW5nKDAsIDEwMCl9Li4uYClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyByZWFkYWJsZSBXb3JkIGNvbW1lbnRzIGZvdW5kJylcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbW1lbnRzLnNsaWNlKDAsIDEwKSAvLyBMaW1pdCB0byBmaXJzdCAxMCBjb21tZW50c1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4dHJhY3RpbmcgV29yZCBjb21tZW50czonLCBlcnJvcilcbiAgICBcbiAgICAvLyBGaW5hbCBmYWxsYmFjazogdHJ5IHRoZSBvbGQgbWV0aG9kIGJ1dCB3aXRoIGJldHRlciB0ZXh0IGNsZWFuaW5nXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXIpXG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcsIHsgZmF0YWw6IGZhbHNlIH0pXG4gICAgICBjb25zdCBjb250ZW50ID0gZGVjb2Rlci5kZWNvZGUodWludDhBcnJheSlcbiAgICAgIFxuICAgICAgLy8gTG9vayBmb3IgcmVhZGFibGUgdGV4dCBwYXR0ZXJucyB0aGF0IG1pZ2h0IGJlIGNvbW1lbnRzXG4gICAgICBjb25zdCByZWFkYWJsZVBhdHRlcm5zID0gW1xuICAgICAgICAvKD86TGlmYW5cXHMrV2FuZ3xXYW5nLD9cXHMrTGlmYW58Q29yb25hZG8sP1xccytBbmRyZXxBbmRyZVxccytDb3JvbmFkbylbXFxzOl0rKFtBLVphLXpcXHMsLlxcLSE/XXsxMCwyMDB9KS9naSxcbiAgICAgICAgL0NvbW1lbnRbXFxzOl0rKFtBLVphLXpcXHMsLlxcLSE/XXsxMCwyMDB9KS9naVxuICAgICAgXVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcmVhZGFibGVQYXR0ZXJucykge1xuICAgICAgICBsZXQgbWF0Y2hcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb250ZW50KSkgIT09IG51bGwgJiYgY29tbWVudHMubGVuZ3RoIDwgNSkge1xuICAgICAgICAgIGNvbnN0IHRleHQgPSBtYXRjaFsxXT8udHJpbSgpXG4gICAgICAgICAgaWYgKHRleHQgJiYgIXRleHQuaW5jbHVkZXMoJycpICYmIHRleHQubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgIGNvbW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICBpZDogYHdvcmQtY29tbWVudC0ke2NvbW1lbnRzLmxlbmd0aCArIDF9YCxcbiAgICAgICAgICAgICAgdGV4dDogY2xlYW5Db21tZW50VGV4dCh0ZXh0KSxcbiAgICAgICAgICAgICAgYXV0aG9yOiBtYXRjaFswXS5pbmNsdWRlcygnTGlmYW4nKSA/ICdMaWZhbiBXYW5nJyA6IFxuICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLmluY2x1ZGVzKCdDb3JvbmFkbycpID8gJ0Nvcm9uYWRvLCBBbmRyZScgOiAnVW5rbm93biBBdXRob3InLFxuICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHN0YXJ0OiAwLCBlbmQ6IDAgfSxcbiAgICAgICAgICAgICAgdHlwZTogJ3dvcmQtY29tbWVudCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFsbGJhY2sgZXh0cmFjdGlvbiBhbHNvIGZhaWxlZDonLCBmYWxsYmFja0Vycm9yKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29tbWVudHNcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhbkNvbW1lbnRUZXh0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1ML1hNTCB0YWdzXG4gICAgLnJlcGxhY2UoLyZbYS16XSs7L2dpLCAnJykgLy8gUmVtb3ZlIEhUTUwgZW50aXRpZXNcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgLnJlcGxhY2UoL1teXFx4MjAtXFx4N0VcXHUwMEEwLVxcdUZGRkZdL2csICcnKSAvLyBSZW1vdmUgY29udHJvbCBjaGFyYWN0ZXJzIGJ1dCBrZWVwIHVuaWNvZGVcbiAgICAudHJpbSgpXG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gcGFyc2UgdmFyaW91cyBkYXRlIGZvcm1hdHNcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cilcbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfVxuICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKClcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwcm9jZXNzVGV4dCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdGV4dFxuICAgIC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpXG4gICAgLnJlcGxhY2UoL1xcci9nLCAnXFxuJylcbiAgICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJylcbiAgICAudHJpbSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kVGV4dFBvc2l0aW9uKGZ1bGxUZXh0OiBzdHJpbmcsIHNlYXJjaFRleHQ6IHN0cmluZyk6IHsgc3RhcnQ6IG51bWJlcjsgZW5kOiBudW1iZXIgfSB8IG51bGwge1xuICBjb25zdCBzdGFydEluZGV4ID0gZnVsbFRleHQuaW5kZXhPZihzZWFyY2hUZXh0KVxuICBpZiAoc3RhcnRJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydEluZGV4LFxuICAgIGVuZDogc3RhcnRJbmRleCArIHNlYXJjaFRleHQubGVuZ3RoXG4gIH1cbn0gIl0sIm5hbWVzIjpbInBkZiIsIm1hbW1vdGgiLCJKU1ppcCIsInByb2Nlc3NGaWxlIiwiZmlsZSIsInN1Y2Nlc3MiLCJlcnJvciIsImZpbGVUeXBlIiwidHlwZSIsImNvbnNvbGUiLCJsb2ciLCJ0ZXh0Iiwid29yZENvbW1lbnRzIiwicHJvY2Vzc1BERiIsInJlc3VsdCIsInByb2Nlc3NET0NYIiwidHJpbSIsImxlbmd0aCIsInVuZGVmaW5lZCIsIkVycm9yIiwibWVzc2FnZSIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImRhdGEiLCJodG1sUmVzdWx0IiwiY29udmVydFRvSHRtbCIsInZhbHVlIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImV4dHJhY3RXb3JkQ29tbWVudHNDb21wcmVoZW5zaXZlIiwiY29tbWVudHMiLCJ6aXAiLCJsb2FkQXN5bmMiLCJjb21tZW50c0ZpbGUiLCJjb21tZW50c1htbCIsImFzeW5jIiwiY29tbWVudE1hdGNoZXMiLCJtYXRjaCIsImZvckVhY2giLCJjb21tZW50WG1sIiwiaW5kZXgiLCJhdXRob3JNYXRjaCIsImF1dGhvciIsImRhdGVNYXRjaCIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbml0aWFsc01hdGNoIiwiZmluYWxBdXRob3IiLCJ0ZXh0RWxlbWVudHMiLCJjb21tZW50VGV4dCIsIm1hcCIsImVsZW1lbnQiLCJ0ZXh0TWF0Y2giLCJmaWx0ZXIiLCJqb2luIiwiaW5jbHVkZXMiLCJwdXNoIiwiaWQiLCJjbGVhbkNvbW1lbnRUZXh0IiwiZm9ybWF0RGF0ZSIsInBvc2l0aW9uIiwic3RhcnQiLCJlbmQiLCJwYXJzZUVycm9yIiwiZG9jdW1lbnRGaWxlIiwiZG9jdW1lbnRYbWwiLCJjb21tZW50UmVmcyIsInJlZiIsImlkTWF0Y2giLCJjb21tZW50SWQiLCJjb21tZW50UGF0dGVybiIsIlJlZ0V4cCIsImNvbW1lbnRNYXRjaCIsImV4ZWMiLCJjb21tZW50Q29udGVudCIsIm1hbW1vdGhCdWZmZXIiLCJodG1sVGV4dCIsIm1hbW1vdGhFcnJvciIsImNvbW1lbnQiLCJpZHgiLCJzbGljZSIsInVpbnQ4QXJyYXkiLCJVaW50OEFycmF5IiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiZmF0YWwiLCJjb250ZW50IiwiZGVjb2RlIiwicmVhZGFibGVQYXR0ZXJucyIsInBhdHRlcm4iLCJmYWxsYmFja0Vycm9yIiwiZGF0ZVN0ciIsImlzTmFOIiwiZ2V0VGltZSIsInByZXByb2Nlc3NUZXh0IiwiZmluZFRleHRQb3NpdGlvbiIsImZ1bGxUZXh0Iiwic2VhcmNoVGV4dCIsInN0YXJ0SW5kZXgiLCJpbmRleE9mIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/file-processor.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/pdf-parse","vendor-chunks/next","vendor-chunks/base64-js","vendor-chunks/safe-buffer","vendor-chunks/underscore","vendor-chunks/mammoth","vendor-chunks/bluebird","vendor-chunks/jszip","vendor-chunks/xmlbuilder","vendor-chunks/pako","vendor-chunks/lop","vendor-chunks/readable-stream","vendor-chunks/@xmldom","vendor-chunks/inherits","vendor-chunks/dingbat-to-unicode","vendor-chunks/util-deprecate","vendor-chunks/string_decoder","vendor-chunks/process-nextick-args","vendor-chunks/path-is-absolute","vendor-chunks/option","vendor-chunks/lie","vendor-chunks/isarray","vendor-chunks/immediate","vendor-chunks/core-util-is"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Flifanwang%2FLegal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flifanwang%2FLegal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();